<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"limuzhi.com","root":"/","scheme":"Mist","version":"7.7.1","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Glide Wikiä¸­æ–‡ç¿»è¯‘ã€‚Glideæ˜¯ä¸€ä¸ªAndroidå›¾ç‰‡åº“ï¼Œç¡®åˆ‡åœ°è¯´åº”å½“å«ã€åª’ä½“æ¡†æ¶ã€ã€‚æ”¯æŒå›¾ç‰‡ã€Gifã€åŸç”Ÿè§†é¢‘çš„åŠ è½½ã€‚ä½¿ç”¨ç®€å•ï¼Œæ€§èƒ½ä¼˜å¼‚ï¼ŒGoogleæ¨èã€‚">
<meta name="keywords" content="Android,ä¸»æ¡†æ¶">
<meta property="og:type" content="article">
<meta property="og:title" content="Androidå›¾ç‰‡åº“--Glide Wikiä¸­æ–‡ç¿»è¯‘">
<meta property="og:url" content="http://limuzhi.com/2016/01/24/Androidå›¾ç‰‡åº“-Glide/index.html">
<meta property="og:site_name" content="Night Piece">
<meta property="og:description" content="Glide Wikiä¸­æ–‡ç¿»è¯‘ã€‚Glideæ˜¯ä¸€ä¸ªAndroidå›¾ç‰‡åº“ï¼Œç¡®åˆ‡åœ°è¯´åº”å½“å«ã€åª’ä½“æ¡†æ¶ã€ã€‚æ”¯æŒå›¾ç‰‡ã€Gifã€åŸç”Ÿè§†é¢‘çš„åŠ è½½ã€‚ä½¿ç”¨ç®€å•ï¼Œæ€§èƒ½ä¼˜å¼‚ï¼ŒGoogleæ¨èã€‚">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2020-02-25T09:44:15.401Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Androidå›¾ç‰‡åº“--Glide Wikiä¸­æ–‡ç¿»è¯‘">
<meta name="twitter:description" content="Glide Wikiä¸­æ–‡ç¿»è¯‘ã€‚Glideæ˜¯ä¸€ä¸ªAndroidå›¾ç‰‡åº“ï¼Œç¡®åˆ‡åœ°è¯´åº”å½“å«ã€åª’ä½“æ¡†æ¶ã€ã€‚æ”¯æŒå›¾ç‰‡ã€Gifã€åŸç”Ÿè§†é¢‘çš„åŠ è½½ã€‚ä½¿ç”¨ç®€å•ï¼Œæ€§èƒ½ä¼˜å¼‚ï¼ŒGoogleæ¨èã€‚">

<link rel="canonical" href="http://limuzhi.com/2016/01/24/Androidå›¾ç‰‡åº“-Glide/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>Androidå›¾ç‰‡åº“--Glide Wikiä¸­æ–‡ç¿»è¯‘ | Night Piece</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Night Piece</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">white && black</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-tools">

    <a href="/tools/" rel="section"><i class="fa fa-fw fa-wrench"></i>åˆ©å™¨</a>

  </li>
        <li class="menu-item menu-item-read">

    <a href="/read/" rel="section"><i class="fa fa-fw fa-book"></i>é˜…è¯»</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-fw fa-heartbeat"></i>å…¬ç›Š 404</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://limuzhi.com/2016/01/24/Androidå›¾ç‰‡åº“-Glide/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="limuzhi">
      <meta itemprop="description" content="something about tech, android etc...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Night Piece">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Androidå›¾ç‰‡åº“--Glide Wikiä¸­æ–‡ç¿»è¯‘
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2016-01-24 10:32:54" itemprop="dateCreated datePublished" datetime="2016-01-24T10:32:54+08:00">2016-01-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-02-25 17:44:15" itemprop="dateModified" datetime="2020-02-25T17:44:15+08:00">2020-02-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/æŠ€æœ¯/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2016/01/24/Androidå›¾ç‰‡åº“-Glide/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2016/01/24/Androidå›¾ç‰‡åº“-Glide/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <div class="post-description">Glide Wikiä¸­æ–‡ç¿»è¯‘ã€‚Glideæ˜¯ä¸€ä¸ªAndroidå›¾ç‰‡åº“ï¼Œç¡®åˆ‡åœ°è¯´åº”å½“å«ã€åª’ä½“æ¡†æ¶ã€ã€‚æ”¯æŒå›¾ç‰‡ã€Gifã€åŸç”Ÿè§†é¢‘çš„åŠ è½½ã€‚ä½¿ç”¨ç®€å•ï¼Œæ€§èƒ½ä¼˜å¼‚ï¼ŒGoogleæ¨èã€‚</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="åº"><a href="#åº" class="headerlink" title="åº"></a>åº</h2><p>æœ€è¿‘ï¼Œä¸€ç›´åœ¨æ£é¼“Glideè¿™ä¸ªå›¾ç‰‡åº“ï¼Œç¡®åˆ‡åœ°è¯´åº”å½“å«ã€åª’ä½“æ¡†æ¶ã€ã€‚ä¸ºäº†æ”¯æŒGifæ’­æ”¾ï¼Œé¡¹ç›®ä¸­ä½¿ç”¨Glideä»£æ›¿äº†Universal Image Loaderã€‚èµ·åˆæˆ‘ä»¬æ‰“ç®—ä½¿ç”¨çš„æ˜¯Frescoæ–¹æ¡ˆï¼Œæœ€ç»ˆå› ä¸ºLibä½“ç§¯çš„é—®é¢˜æ”¾å¼ƒã€‚ä¸‡ä¸‡æ²¡æƒ³åˆ°apkçš„sizeè¿™ä¹ˆæ•æ„Ÿï¼Œå›½å¤–å¾ˆå¤šæ¨å¹¿æœåŠ¡æ˜¯æ ¹æ®apkä½“ç§¯æ”¶è´¹çš„ï¼Œ3Mä¸€ä¸ªé—¨æ§›ï¼Œ5Mä¸€ä¸ªé—¨æ§›ã€‚frescoå¼•å…¥ä¹‹åå³ä½¿proguardã€7zipï¼Œapkçš„å¤§å°ä¹Ÿå¢åŠ äº†1M+ï¼Œå¤šå¹³å°çš„osåº“æ˜¯ä¸ªå¤§å¤´ï¼Œç¬¬ä¸‰ä¸–ç•Œçš„åº”ç”¨å¸‚åœºè¿˜ä¸æ”¯æŒæŒ‰å¹³å°åˆ†å‘ğŸ˜“ã€‚ã€‚<br>Glideçš„ä½¿ç”¨è¿˜ä¸æ·±å…¥ï¼Œä»…ä»…åœç•™åœ¨Apiçš„èŒƒç•´ï¼Œä¸ºäº†è§£å†³bugï¼Œè·Ÿè¸ªäº†ä»£ç ï¼Œä¹Ÿæ˜¯äº‘é‡Œé›¾é‡Œã€‚ä¸å¾—ä¸è¯´ï¼ŒGlideæºç çš„è®¾è®¡ååˆ†NBï¼Œé¢å‘æ¥å£çš„ç†å¿µè´¯å½»çš„å¾ˆå½»åº•ï¼Œæ˜¯ä¸€ä¸ªå­¦ä¹ è®¾è®¡çš„å¥½demoã€‚<br>GitHubçš„READMEä½œä¸ºæœ€ç®€å•çš„å…¥é—¨è¶³å¤Ÿäº†ï¼Œä½†æ˜¯é‡åˆ°å…·ä½“é—®é¢˜è¿˜æ˜¯è¦ç†è§£ä¸€äº›è®¾è®¡æ€æƒ³çš„ï¼ŒGitHubä¸Šçš„Wikiæœ‰ä¸€ä»½ä¸é”™çš„æ–‡æ¡£ï¼Œå¯æƒœæœ¨æœ‰ä¸­æ–‡ï¼Œæ­£å¥½å­¦ä¹ çš„è¿‡ç¨‹ä¸­ç¿»è¯‘ä¸€ä¸‹ã€‚<br>åœ¨çœ‹wikiä¹‹å‰ï¼Œå¯ä»¥å…ˆçœ‹è¿™ä¸¤ç¯‡ä¸­æ–‡å…¥é—¨ï¼Œäº†è§£åŸºæœ¬çš„ç”¨æ³•ã€‚</p>
<ul>
<li><a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0327/2650.html" target="_blank" rel="noopener">Googleæ¨èçš„å›¾ç‰‡åŠ è½½åº“Glideä»‹ç»</a></li>
<li><a href="http://www.jianshu.com/p/4a3177b57949" target="_blank" rel="noopener">Glide ä¸€ä¸ªä¸“æ³¨äºå¹³æ»‘æ»šåŠ¨çš„å›¾ç‰‡åŠ è½½å’Œç¼“å­˜åº“</a></li>
</ul>
<p>æœ¬æ–‡æ˜¯åŸºäº<strong>Glide 3.x</strong>æ­£å¼ç‰ˆçš„<a href="https://github.com/bumptech/glide/wiki" target="_blank" rel="noopener">Wikiæ–‡æ¡£</a>çš„ç¿»è¯‘ï¼ˆåŸæ–‡ç¼–è¾‘æ—¥æœŸï¼š2015-2-9,18 revisionï¼Œå½“æ—¶Glide releaseçš„ç‰ˆæœ¬å·3.6.1ï¼‰ã€‚</p>
<p>ç¿»è¯‘Versionï¼š1.1 ç®€å•æ ¡å¯¹</p>
<h3 id="åè¯è§£é‡Š"><a href="#åè¯è§£é‡Š" class="headerlink" title="åè¯è§£é‡Š"></a>åè¯è§£é‡Š</h3><p>Glideä¸­æœ‰ä¸€éƒ¨åˆ†å•è¯ï¼Œæˆ‘ä¸çŸ¥é“ç”¨ä»€ä¹ˆä¸­æ–‡å¯ä»¥ç¡®åˆ‡çš„è¡¨è¾¾å‡ºå«ä¹‰ï¼Œç”¨è‹±æ–‡å•è¯å¯èƒ½åœ¨è¡Œæ–‡ä¸­æ›´åŠ åˆé€‚ï¼Œè¿˜æœ‰ä¸€äº›è¯åœ¨Glideä¸­æœ‰ç‰¹åˆ«çš„å«ä¹‰ï¼Œæˆ‘ç†è§£çš„å¯èƒ½ä¹Ÿä¸æ·±å…¥ï¼Œè¿™é‡Œå…ˆè®°å½•ä¸€ä¸‹ã€‚</p>
<ul>
<li>Viewï¼š ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒæŒ‡Androidä¸­çš„ViewåŠå…¶å­ç±»æ§ä»¶ï¼ˆåŒ…æ‹¬è‡ªå®šä¹‰çš„ï¼‰ï¼Œå°¤å…¶æŒ‡ImageViewã€‚è¿™äº›æ§ä»¶å¯åœ¨ä¸Šé¢ç»˜åˆ¶Drawable</li>
<li>Targetï¼š Glideä¸­é‡è¦çš„æ¦‚å¿µï¼Œç›®æ ‡ã€‚å®ƒå³å¯ä»¥æŒ‡å°è£…äº†ä¸€ä¸ªViewçš„Targetï¼ˆViewTargetï¼‰ï¼Œä¹Ÿå¯ä»¥ä¸åŒ…å«Viewï¼ˆSimpleTargetï¼‰ã€‚</li>
<li>Drawableï¼š æŒ‡Androidä¸­çš„Drawableç±»æˆ–è€…å®ƒçš„å­ç±»ï¼Œå¦‚BitmapDrawableç­‰ã€‚æˆ–è€…Glideä¸­åŸºç¡€Drawableå®ç°çš„è‡ªå®šä¹‰Drawableï¼ˆå¦‚GifDrawableç­‰ï¼‰</li>
<li>Request - åŠ è½½è¯·æ±‚ï¼Œå¯ä»¥æ˜¯ç½‘ç»œè¯·æ±‚æˆ–è€…å…¶ä»–ä»»ä½•ä¸‹è½½å›¾ç‰‡çš„è¯·æ±‚ï¼Œä¹Ÿæ˜¯Glideä¸­çš„ä¸€ä¸ªç±»ã€‚</li>
<li>Modelï¼šæ•°æ®æºçš„æä¾›è€…ï¼Œå¦‚Urlï¼Œæ–‡ä»¶è·¯å¾„ç­‰ï¼Œå¯ä»¥ä»modelä¸­è·å–InputStreamã€‚</li>
<li>Signatureï¼šç­¾åï¼Œå¯ä»¥å”¯ä¸€åœ°æ ‡è¯†ä¸€ä¸ªå¯¹è±¡ã€‚</li>
<li>recycle()ï¼šGlideä¸­Resourceç±»æœ‰æ­¤æ–¹æ³•ï¼Œè¡¨ç¤ºè¯¥èµ„æºä¸è¢«å¼•ç”¨ï¼Œå¯ä»¥æ”¾å…¥æ± ä¸­ï¼ˆæ­¤æ—¶å¹¶æ²¡æœ‰é‡Šæ”¾ç©ºé—´ï¼‰ã€‚Androidä¸­Bitmapä¹Ÿæœ‰æ­¤æ–¹æ³•ï¼Œè¡¨ç¤ºé‡Šæ”¾Bitmapå ç”¨çš„å†…å­˜ã€‚</li>
</ul>
<h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ul>
<li>ä¸»ç›®å½•</li>
<li>ç¼“å­˜æœºåˆ¶ä¸ç¼“å­˜å¤±æ•ˆ</li>
<li>Glideé…ç½®</li>
<li>è‡ªå®šä¹‰Target</li>
<li>è°ƒè¯•ä¸é”™è¯¯å¤„ç†</li>
<li>ä½¿ç”¨Glideä¸‹è½½è‡ªå®šä¹‰å¤§å°å›¾ç‰‡</li>
<li>é›†æˆåº“-ä¸å…¶ä»–åº“ç›¸æ•´åˆ</li>
<li>åœ¨åå°çº¿ç¨‹ä¸­åŠ è½½ä¸ç¼“å­˜æ•°æ®</li>
<li>Glideä¸­çš„èµ„æºå¤ç”¨</li>
<li>å¿«ç…§ï¼ˆSnapshotsï¼‰</li>
<li>å›¾å½¢å˜æ¢ï¼ˆTransformationsï¼‰</li>
</ul>
<hr>
<h2 id="ä¸»ç›®å½•"><a href="#ä¸»ç›®å½•" class="headerlink" title="ä¸»ç›®å½•"></a>ä¸»ç›®å½•</h2><h3 id="æŠ¥å‘Šé—®é¢˜"><a href="#æŠ¥å‘Šé—®é¢˜" class="headerlink" title="æŠ¥å‘Šé—®é¢˜"></a>æŠ¥å‘Šé—®é¢˜</h3><p>å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥åœ¨<a href="https://github.com/bumptech/glide/issues/" target="_blank" rel="noopener">Githubä¸Šæå‡º</a>æˆ–è€…å‘é€e-mailåˆ°æˆ‘ä»¬çš„<a href="https://groups.google.com/forum/#!forum/glidelibrary" target="_blank" rel="noopener">é‚®ä»¶åˆ—è¡¨</a>ï¼Œä¹Ÿå¯ä»¥åœ¨IRC(Internet Relay Chat ç½‘ç»œä¸­ç»§èŠå¤©ï¼Ÿ)é¢‘é“ä¸Šè”ç³»æˆ‘ä»¬ï¼š<a href="http://webchat.freenode.net/?channels=glide-library" target="_blank" rel="noopener">irc.freenode.net#glide-library</a>ã€‚</p>
<h3 id="3-0ç‰ˆæœ¬çš„æ–°ç‰¹æ€§"><a href="#3-0ç‰ˆæœ¬çš„æ–°ç‰¹æ€§" class="headerlink" title="3.0ç‰ˆæœ¬çš„æ–°ç‰¹æ€§"></a>3.0ç‰ˆæœ¬çš„æ–°ç‰¹æ€§</h3><ul>
<li><p>æ”¯æŒGifåŠ¨ç”»çš„è§£ç  - ä¸åŠ è½½å›¾ç‰‡ç›¸åŒï¼Œåªè¦è°ƒç”¨Glide.with(â€¦).load(â€¦)ï¼Œå¦‚æœä½ åŠ è½½çš„å›¾ç‰‡æ˜¯ä¸€ä¸ªå¯ä»¥æ’­æ”¾çš„Gifï¼ŒGlideä¼šè‡ªåŠ¨åŠ è½½å®ƒå¹¶æ˜¾ç¤ºåœ¨ä¸€ä¸ªè‡ªå®šä¹‰çš„Drawableä¸Šï¼ˆæ³¨ï¼šGifDrawableï¼‰ã€‚æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥æ§åˆ¶çš„æ›´å¤šï¼Œæ¯”å¦‚</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½ æƒ³åŠ è½½Gifä¸ºä¸€å¼ é™æ€å›¾ç‰‡</span></span><br><span class="line">Glide.with(context).load(...).asBitmap()ã€‚</span><br><span class="line"><span class="comment">// æˆ–è€…ä½ æƒ³åªæœ‰åŠ è½½å¯¹è±¡æ˜¯Gifæ—¶æ‰èƒ½åŠ è½½æˆåŠŸ</span></span><br><span class="line">Glide.with(context).load(...).asGif()ã€‚</span><br></pre></td></tr></table></figure>
</li>
<li><p>æœ¬åœ°è§†é¢‘æ’­æ”¾æŠ€æœ¯ - é™¤äº†è§£ç Gifï¼ŒGlideä¹Ÿèƒ½è§£ç ä½ è®¾å¤‡ä¸Šçš„è§†é¢‘ï¼ˆvideoï¼‰ã€‚ä½¿ç”¨æ–¹æ³•å’ŒåŠ è½½gifç›¸åŒï¼ŒGlideæ”¯æŒæ‰€æœ‰Androidå¯ä»¥ç›´æ¥è§£ç çš„è§†é¢‘ã€‚</p>
</li>
<li><p>æ”¯æŒç¼©ç•¥å›¾åŠ è½½ - æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›å‡å°‘ç”¨æˆ·ç­‰å¾…çš„æ—¶é—´åˆä¸æƒ³ç‰ºç‰²å›¾ç‰‡çš„è´¨é‡ï¼Œæˆ‘ä»¬å¯ä»¥åŒæ—¶åŠ è½½å¤šå¼ å›¾ç‰‡åˆ°ä¸€ä¸ªViewä¸­ï¼Œå…ˆåŠ è½½ç¼©ç•¥å›¾ï¼ˆåªæœ‰viewçš„1/10å¤§å°ï¼‰ï¼Œç„¶åå†åŠ è½½ä¸€ä¸ªå®Œæ•´çš„å›¾åƒè¦†ç›–åœ¨ä¸Šé¢ã€‚ä½¿ç”¨ä¸‹é¢çš„ä»£ç </p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(yourFragment).load(yourUrl).thumbnail(<span class="number">0.1f</span>).into(yourView)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªRequeståˆ°<code>.thumbnail()</code>å‡½æ•°ä¸­ä½œä¸ºå‚æ•°ã€‚</p>
<ul>
<li>ä¸ç”Ÿå‘½å‘¨æœŸé›†æˆ - åŠ è½½è¯·æ±‚ç°åœ¨ä¼šè‡ªåŠ¨åœ¨onStopä¸­æš‚åœåœ¨ï¼ŒonStartä¸­é‡æ–°å¼€å§‹ã€‚ä¸ºäº†èŠ‚çº¦ç”µé‡ï¼ŒGifåŠ¨ç”»ä¹Ÿä¼šåœ¨onStopä¸­è‡ªåŠ¨æš‚åœã€‚æ­¤å¤–ï¼Œå½“è®¾å¤‡çš„è¿æ¥çŠ¶æ€æ”¹å˜æ—¶ï¼Œæ‰€æœ‰å¤±è´¥çš„è¯·æ±‚ä¼šè‡ªåŠ¨é‡è¯•ï¼Œç¡®ä¿Glideä¸ä¼šå› ä¸ºä¸´æ—¶æ€§çš„è¿æ¥é—®é¢˜ï¼Œå¯¼è‡´è¯·æ±‚æ°¸è¿œå¤±è´¥ã€‚</li>
<li><p>è½¬ç  - é™¤äº†è§£ç èµ„æºï¼ŒGlideçš„<code>.toBytes()</code>å’Œ<code>.transcode()</code>æ–¹æ³•å…è®¸ä½ åœ¨åå°æ­£å¸¸åœ°è·å–ã€è§£ç ã€å˜æ¢ä¸€å¼ å›¾ç‰‡ã€‚ä½ è¿˜å¯ä»¥åœ¨è¿™äº›è°ƒç”¨ä¸­æŠŠå›¾ç‰‡è½¬ç æˆæ›´æœ‰ç”¨çš„æ ¼å¼ï¼Œæ¯”å¦‚ï¼Œä¸Šä¼ ä¸€å¼ å¤§å°ä¸º250*250åƒç´ çš„ç”¨æˆ·å¤´åƒçš„å›¾ç‰‡bytesæ•°æ®ï¼Œä»£ç å¦‚ä¸‹</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(context)</span><br><span class="line">    .load(â€œ/user/profile/photo/pathâ€)</span><br><span class="line">    .asBitmap()</span><br><span class="line">    .toBytes()</span><br><span class="line">    .centerCrop()</span><br><span class="line">    .into(<span class="keyword">new</span> SimpleTarget&lt;<span class="keyword">byte</span>[]&gt;(<span class="number">250</span>, <span class="number">250</span>) &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResourceReady</span><span class="params">(<span class="keyword">byte</span>[] data, GlideAnimation anim)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// åœ¨æ­¤å¤„ï¼Œå°†bytesæ•°æ®ä¼ å…¥åå°çº¿ç¨‹ï¼Œå†ä¸Šä¼ ä»–ä»¬</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>åŠ¨ç”» - Glide3.Xæ”¯æŒã€æ·¡å…¥æ·¡å‡ºã€åŠ¨ç”»ï¼ˆ<code>.crossFade()</code>ï¼‰å’Œviewçš„å±æ€§åŠ¨ç”»(<code>.animate(ViewPropertyAnimation.Animator)</code>)ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰Glide2.0å°±æ”¯æŒçš„android viewåŠ¨ç”»ã€‚</p>
</li>
<li>æ”¯æŒ OkHttp å’Œ Volley - ç°åœ¨ä½ å¯ä»¥é€‰æ‹©ç”¨OkHttpã€Volleyæˆ–è€…é»˜è®¤çš„HttpUrlConnectionä½œä¸ºç½‘ç»œæ ˆã€‚OkHttpå’ŒVolleyå¯ä»¥é€šè¿‡æ·»åŠ å¯¹åº”çš„é›†æˆåº“(integration library)å’Œæ³¨å†Œç›¸åº”çš„<code>ModelLoaderFactory</code>æ¥å¼•å…¥ã€‚å…·ä½“æŸ¥çœ‹ReadMeæ–‡ä»¶ã€‚</li>
<li>å…¶ä»– - å¯ä»¥ä½¿ç”¨Drawableå¯¹è±¡ä½œä¸ºåŠ è½½ä¸­çš„å ä½å›¾ã€è¯·æ±‚ä¼˜å…ˆçº§ã€è¦†ç›–è‡ªå®šä¹‰å®½å’Œé«˜ã€å¯ä»¥ç¼“å­˜å˜æ¢åçš„ç¼©ç•¥å›¾æˆ–è€…ç¼“å­˜åŸå§‹æ–‡ä»¶</li>
</ul>
<h3 id="ä»2-0è¿ç§»åˆ°3-0"><a href="#ä»2-0è¿ç§»åˆ°3-0" class="headerlink" title="ä»2.0è¿ç§»åˆ°3.0"></a>ä»2.0è¿ç§»åˆ°3.0</h3><ul>
<li>å°†æ‰€æœ‰çš„<code>Glide.load()</code>æ›¿æ¢ä¸º<code>Glide.with([fragment/activity/context]).load()</code>ã€‚</li>
<li>å°†æ‰€æœ‰çš„è‡ªå®šä¹‰çš„åŠ è½½è°ƒç”¨<code>Glide.load(url).into(new SimpleTarget(){ ... }).with(context)</code>æ›¿æ¢æˆ<code>Glide.with(context).load(url).into(new SimpleTarget(width, height) { ... })</code>ã€‚</li>
</ul>
<h3 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h3><p>é™¤äº†3.0å¼•å…¥çš„æ–°åŠŸèƒ½ï¼ŒGlideç»§æ‰¿äº†2.0çš„æ‰€æœ‰åŠŸèƒ½ï¼š</p>
<ul>
<li>åå°å›¾ç‰‡åŠ è½½</li>
<li>å¦‚æœä½ ä½¿ç”¨äº†listviewçš„å¤ç”¨æœºåˆ¶ï¼Œé‚£ä¹ˆGlideä¼šè‡ªåŠ¨å–æ¶ˆä½œä¸šï¼ˆjobï¼‰</li>
<li>å†…å­˜å’Œç£ç›˜ç¼“å­˜</li>
<li>Bitmapå’Œèµ„æºæ± æ¥å‡å°‘å†…å­˜æŠ–åŠ¨</li>
<li>æ”¯æŒä»»æ„çš„å›¾åƒå˜æ¢</li>
</ul>
<hr>
<h2 id="ç¼“å­˜æœºåˆ¶ä¸ç¼“å­˜å¤±æ•ˆ"><a href="#ç¼“å­˜æœºåˆ¶ä¸ç¼“å­˜å¤±æ•ˆ" class="headerlink" title="ç¼“å­˜æœºåˆ¶ä¸ç¼“å­˜å¤±æ•ˆ"></a>ç¼“å­˜æœºåˆ¶ä¸ç¼“å­˜å¤±æ•ˆ</h2><p>ç¼“å­˜å¤±æ•ˆæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„è¯é¢˜ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œä½ å°½å¯èƒ½ä¸è¦è€ƒè™‘è¿™ä¸ªé—®é¢˜ã€‚è¿™ä¸€èŠ‚ä¸»è¦æ˜¯è®©ä½ ç²—ç•¥çš„äº†è§£ä¸€ä¸‹Glideä¸­cacheçš„keyæ˜¯å¦‚ä½•ç”Ÿæˆï¼Œä»¥åŠæä¾›ä¸€äº›å…³äºå¦‚ä½•åˆç†åˆ©ç”¨ç¼“å­˜çš„æç¤ºã€‚</p>
<h3 id="ç¼“å­˜çš„key"><a href="#ç¼“å­˜çš„key" class="headerlink" title="ç¼“å­˜çš„key"></a>ç¼“å­˜çš„key</h3><p><code>DiskCacheStrategy.RESULT</code>ç£ç›˜ç¼“å­˜ç­–ç•¥ï¼ˆæ³¨ï¼šæˆ‘ä»¬é…ç½®çš„ä¸€ç§ç£ç›˜ç¼“å­˜ç­–ç•¥ï¼‰ä½¿ç”¨çš„keyç”±ä»¥ä¸‹å››ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li>DataFetcherçš„æ–¹æ³•<code>getId()</code>è¿”å›çš„å­—ç¬¦ã€‚å…¸å‹åœ°ï¼ŒDataFetcherä»…ä»…è¿”å›ç”±æ•°æ®Modelçš„<code>toString()</code>æ–¹æ³•å¾—åˆ°çš„å€¼ã€‚æ‰€ä»¥ï¼Œå¦‚æœModelæ˜¯ä¸€ä¸ª<strong>URL</strong>ï¼Œé‚£ä¹ˆä¼šè¿”å›URLçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœModelæ˜¯æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆä¼šè¿”å›æ–‡ä»¶çš„<strong>è·¯å¾„</strong>ã€‚ã€‚ã€‚</li>
<li>å®½å’Œé«˜ã€‚å¦‚æœä½ è°ƒç”¨è¿‡override(width,height)æ–¹æ³•ï¼Œé‚£ä¹ˆå°±æ˜¯æ˜¯å®ƒä¼ å…¥çš„å€¼ã€‚æ²¡æœ‰è°ƒç”¨è¿‡ï¼Œé»˜è®¤æ˜¯é€šè¿‡<strong>Target</strong>çš„<code>getSize()</code>æ–¹æ³•è·å¾—è¿™ä¸ªå€¼ã€‚</li>
<li>å„ç§ç¼–ç å™¨ã€è§£ç å™¨çš„<code>getId()</code>æ–¹æ³•è¿”å›çš„å­—ç¬¦ä¸²ã€‚è¿™äº›ç¼–ç å™¨ã€è§£ç å™¨ç”¨äºåŠ è½½å’Œç¼“å­˜ä½ çš„å›¾ç‰‡ã€‚ä»…æœ‰å“ªäº›å †bytesæ•°æ®æœ‰å½±å“çš„ç¼–ç å™¨ã€è§£ç å™¨æ‰ä¼šæœ‰è¿™äº›<code>id</code>å€¼ã€‚æ¯”å¦‚ï¼Œä½ åªæœ‰ä¸€ä¸ªå°†bytesæ•°æ®å†™å…¥ç£ç›˜çš„ç¼–ç å™¨ï¼Œé‚£ä¹ˆå®ƒå°±æ²¡æœ‰idå€¼ï¼Œå› ä¸ºä¸ç®¡æ€æ ·å®ƒéƒ½ä¸ä¼šä¿®æ”¹æ•°æ®ã€‚</li>
<li>å¯é€‰åœ°ï¼Œä½ å¯ä»¥ä¸ºå›¾ç‰‡åŠ è½½æä¾›ç­¾å(Signature)ï¼Œè¯·çœ‹ä¸‹é¢çš„ç¼“å­˜å¤±æ•ˆéƒ¨åˆ†ã€‚</li>
</ul>
<p>æ‰€æœ‰çš„è¿™äº›keyï¼Œä»¥ç‰¹å®šçš„é¡ºåºè®¡ç®—å‡ºhashå€¼ï¼Œå¹¶å°†è¿™ä¸ªå€¼ä½œä¸ºä¿å­˜å›¾ç‰‡åˆ°ç£ç›˜ä¸Šçš„å”¯ä¸€ä¸”å®‰å…¨çš„æ–‡ä»¶åã€‚</p>
<h3 id="ç¼“å­˜å¤±æ•ˆ"><a href="#ç¼“å­˜å¤±æ•ˆ" class="headerlink" title="ç¼“å­˜å¤±æ•ˆ"></a>ç¼“å­˜å¤±æ•ˆ</h3><p>ç”±äºæ–‡ä»¶åæ˜¯hashå€¼ï¼Œæ²¡æœ‰ç®€ä¾¿çš„æ–¹å¼åˆ é™¤ç£ç›˜ä¸ŠæŸä¸ªç‰¹å®šurlæˆ–è€…æ–‡ä»¶è·¯å¾„çš„æ‰€æœ‰ç¼“å­˜æ–‡ä»¶ã€‚å¦‚æœä»…ä»…ç¼“å­˜åŸæ–‡ä»¶ï¼Œé—®é¢˜å¯èƒ½è¿˜æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯Glideä¼šç¼“å­˜ç¼©ç•¥å›¾ï¼Œå„ç§å˜æ¢åçš„å›¾ç‰‡ï¼Œæ‰€æœ‰è¿™äº›ç¼“å­˜éƒ½ä¼šäº§ç”Ÿæ–°æ–‡ä»¶ã€‚è·Ÿè¸ªå’Œåˆ é™¤æ‰€æœ‰æ–‡ä»¶æ˜¯ååˆ†å›°éš¾çš„ã€‚</p>
<h3 id="è‡ªå®šä¹‰ç¼“å­˜å¤±æ•ˆ"><a href="#è‡ªå®šä¹‰ç¼“å­˜å¤±æ•ˆ" class="headerlink" title="è‡ªå®šä¹‰ç¼“å­˜å¤±æ•ˆ"></a>è‡ªå®šä¹‰ç¼“å­˜å¤±æ•ˆ</h3><p>é€šå¸¸æƒ…å†µä¸‹æ”¹å˜ç¼“å­˜çš„æ ‡å¿—ï¼ˆkeyï¼‰æ˜¯å›°éš¾çš„ã€‚Glideæä¾›äº†<code>signature()</code>APIæ¥æ··å…¥å…¶ä»–æ•°æ®ï¼Œå¸®åŠ©ä½ æ§åˆ¶ç¼“å­˜çš„keyã€‚ç­¾åï¼ˆSignatureï¼‰å¯¹äºå¤šåª’ä½“æˆ–è€…æœ‰ç‰ˆæœ¬ä¿¡æ¯çš„å†…å®¹æ¥è¯´éƒ½å¾ˆæœ‰ç”¨ã€‚</p>
<ul>
<li>åª’ä½“åº“å†…å®¹ - å¯¹äºåª’ä½“åº“å†…å®¹ï¼Œä½ å¯ä»¥ä½¿ç”¨Glideçš„<code>MediaStoreSignature</code>ç±»ä½œä¸ºç­¾åï¼Œ MediaStoreSignatureç±»å…è®¸ä½ æ··å…¥æ–‡ä»¶ä¿®æ”¹æ—¶é—´ã€mimeç±»å‹ã€åª’ä½“åº“çš„æ–¹å‘(orientation?)è¿™äº›å€¼ä½œä¸ºç¼“å­˜çš„keyï¼Œè¿™ä¸‰ä¸ªå€¼è¶³ä»¥è®©ä½ å¯é çš„æ•æ‰åˆ°ä»»ä½•ä¿®æ”¹å’Œæ›´æ–°ï¼Œä½¿ä½ å¯ä»¥ç¼“å­˜åª’ä½“åº“çš„ç¼©ç•¥å›¾.?</li>
<li>æ–‡ä»¶ - ä½ å¯ä»¥ä½¿ç”¨<code>StringSignature</code>æ··å…¥æ–‡ä»¶ä¿®æ”¹æ—¶é—´</li>
<li>url - è™½ç„¶ä½¿urlå¤±æ•ˆæœ€å¥½çš„æ–¹å¼æ˜¯å½“å†…å®¹å˜åŒ–æ—¶ï¼ŒæœåŠ¡å™¨ä¿®æ”¹urlå¹¶æ›´æ–°å®¢æˆ·ç«¯ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥ç”¨<code>StringSignature</code>æ··å…¥ä»»æ„çš„å…ƒæ•°æ®ï¼ˆå¦‚ç‰ˆæœ¬å·ï¼‰æ¥ä½¿ç¼“å­˜å¤±æ•ˆã€‚</li>
</ul>
<p>ä½¿ç”¨String SignatureåŠ è½½æ•°æ®å¾ˆç®€å•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(yourFragment)</span><br><span class="line">    .load(yourFileDataModel)</span><br><span class="line">    .signature(<span class="keyword">new</span> StringSignature(yourVersionMetadata))</span><br><span class="line">    .into(yourImageView);</span><br></pre></td></tr></table></figure>
<p>åª’ä½“åº“Signatureå¯ä»¥ç›´æ¥ä½¿ç”¨ä»MeidaStore(æ³¨ï¼šä¸€ä¸ªandroid apiï¼‰è·å¾—çš„æ•°æ®</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(fragment)</span><br><span class="line">    .load(mediaStoreUri)</span><br><span class="line">    .signature(<span class="keyword">new</span> MediaStoreSignature(mimeType, dateModified, orientation))</span><br><span class="line">    .into(view);</span><br></pre></td></tr></table></figure>
<p>ä½ è¿˜å¯ä»¥é€šè¿‡å®ç°<code>key</code>æ¥å£æ¥è‡ªå®šä¹‰ç­¾åï¼Œç¡®ä¿å®ç°äº†<code>equals()</code>, <code>hashCode()</code>å’Œ<code>updateDiskCacheKey()</code>è¿™å‡ ä¸ªæ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IntegerVersionSignature</span> <span class="keyword">implements</span> <span class="title">Key</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> currentVersion;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">IntegerVersionSignature</span><span class="params">(<span class="keyword">int</span> currentVersion)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">this</span>.currentVersion = currentVersion;</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (o <span class="keyword">instanceof</span> IntegerVersionSignature) &#123;</span><br><span class="line">            IntegerVersionSignature other = (IntegerVersionSignature) o;</span><br><span class="line">            <span class="keyword">return</span> currentVersion = other.currentVersion;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>; </span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123; </span><br><span class="line">        <span class="keyword">return</span> currentVersion;</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateDiskCacheKey</span><span class="params">(MessageDigest md)</span> </span>&#123;</span><br><span class="line">        messageDigest.update(ByteBuffer.allocate(Integer.SIZE).putInt(signature).array());</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯·ç‰¢è®°ï¼šä¸ºäº†é¿å…æ€§èƒ½ä¸‹é™ï¼Œè¯·åœ¨åå°çº¿ç¨‹ä¸­æ‰¹é‡åŠ è½½ç‰ˆæœ¬å…ƒæ•°æ®(metaDataï¼Œæ³¨ï¼šä¸€èˆ¬æŸ¥è¯¢æ•°æ®åº“è·å¾—)ï¼Œåªæœ‰è¿™æ ·ï¼Œæ‰èƒ½ç¡®ä¿å½“ä½ æƒ³åŠ è½½å›¾ç‰‡çš„æ—¶å€™ï¼Œè¿™äº›å€¼æ˜¯å¯ç”¨çš„ã€‚</p>
<p>å¦‚æœè¿™äº›æ–¹æ³•éƒ½å¤±è´¥äº†ï¼Œæ¯”å¦‚ï¼Œä½ ä¸èƒ½æ”¹å˜æ ‡è¯†ç¬¦ï¼Œä¹Ÿä¸èƒ½è·Ÿè¸ªä¸€ä¸ªåˆç†çš„ç‰ˆæœ¬å·ã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨<code>diskCacheStrategy()</code>å’Œ<code>DiskCacheStrategy.NONE.</code>æ¥å®Œå…¨å…³é—­ç£ç›˜ç¼“å­˜ã€‚</p>
<hr>
<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><h3 id="æ‡’åŠ è½½é…ç½®"><a href="#æ‡’åŠ è½½é…ç½®" class="headerlink" title="æ‡’åŠ è½½é…ç½®"></a>æ‡’åŠ è½½é…ç½®</h3><p>ä»Glide3.5å¼€å§‹ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>GlideModule</code>æ¥å£æ¥æ‡’åŠ è½½é…ç½®Glideä»¥åŠæ³¨å†Œç»„ä»¶ï¼ˆå¦‚<code>ModelLoaders</code>)ï¼Œè¿™äº›é…ç½®å°†ä¼šåœ¨ç¬¬ä¸€ä¸ªGlideè¯·æ±‚å‘èµ·çš„æ—¶å€™è¢«è°ƒç”¨ã€‚</p>
<h3 id="åˆ›å»ºä¸€ä¸ªGlideModule"><a href="#åˆ›å»ºä¸€ä¸ªGlideModule" class="headerlink" title="åˆ›å»ºä¸€ä¸ªGlideModule"></a>åˆ›å»ºä¸€ä¸ªGlideModule</h3><p>ä¸ºäº†ä½¿ç”¨å’Œæ³¨å†ŒGlideModuleï¼Œé¦–å…ˆéœ€è¦å®ç°è¯¥æ¥å£ï¼ŒåŠ å…¥ä½ çš„é…ç½®å’Œç»„ä»¶ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.mypackage; </span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyGlideModule</span> <span class="keyword">implements</span> <span class="title">GlideModule</span> </span>&#123; </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">applyOptions</span><span class="params">(Context context, GlideBuilder builder)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Apply options to the builder here. </span></span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerComponents</span><span class="params">(Context context, Glide glide)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// register ModelLoaders here. </span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œæ·»åŠ ä½ çš„å®ç°ç±»åˆ°<code>proguard.cfg</code>æ–‡ä»¶ä¸­ï¼Œè®©ä½ çš„moduleå¯ä»¥è¢«åå°„è°ƒç”¨åˆ°ã€‚è¿™ä¸ªæ€§èƒ½å¼€æ”¯å¾ˆå°‘ï¼Œå› ä¸ºæ¯ä¸ªmoduleåªä¼šåœ¨Glideç¬¬ä¸€æ¬¡è¯·æ±‚çš„æ—¶å€™å®ä¾‹åŒ–ä¸€æ¬¡ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-keepnames class com.mypackage.MyGlideModule</span><br><span class="line"># or more generally:</span><br><span class="line">#-keep public class * implements com.bumptech.glide.module.GlideModule</span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œæ·»åŠ meta-dataæ ‡è®°åˆ°<code>AndroidManifest.xml</code>ï¼Œé‚£æ ·Glideæ‰èƒ½æ‰¾åˆ°å®ƒã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ... permissions --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">"com.mypackage.MyGlideModule"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:value</span>=<span class="string">"GlideModule"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ... activities and other components --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥å®ç°ä»»æ„ä¸ª<code>GlideModule</code>ï¼Œä½†æ˜¯æ¯ä¸€ä¸ªéƒ½è¦æ·»åŠ åˆ°<code>proguard.cfg</code>ï¼Œè€Œä¸”æ¯ä¸€ä¸ªGlideModuleéƒ½è¦åœ¨manifestæœ‰è‡ªå·±çš„meta-dataæ ‡è®°ã€‚</p>
<h3 id="Libraryå·¥ç¨‹"><a href="#Libraryå·¥ç¨‹" class="headerlink" title="Libraryå·¥ç¨‹"></a>Libraryå·¥ç¨‹</h3><p>Libraryå·¥ç¨‹å¯èƒ½å«æœ‰ä¸€ä¸ªæˆ–å¤šä¸ª<code>GlideModule</code>ã€‚å½“æˆ‘ä»¬ä½¿ç”¨Gradleï¼ˆæˆ–è€…ä»»ä½•æ”¯æŒmanifeståˆå¹¶çš„æ„å»ºå·¥å…·ï¼‰æ„å»ºappæ—¶ï¼Œå¦‚æœæˆ‘ä»¬æ‰€ä¾èµ–çš„Libraryå·¥ç¨‹çš„manifestä¸­å«æœ‰moduleï¼Œé‚£ä¹ˆè¿™äº›moduleä¼šè‡ªåŠ¨å¹¶å…¥åˆ°appä¸­ã€‚å¦‚æœæ„å»ºå·¥å…·ä¸æ”¯æŒmanifeståˆå¹¶ï¼Œé‚£ä¹ˆè¿™äº›libraryå·¥ç¨‹ä¸­çš„moduleå¿…é¡»æ‰‹åŠ¨æ·»åŠ åˆ°ä½ appçš„manifestä¸­ã€‚</p>
<h3 id="GlideModuleå†²çª"><a href="#GlideModuleå†²çª" class="headerlink" title="GlideModuleå†²çª"></a>GlideModuleå†²çª</h3><p>è™½ç„¶Glideå…è®¸æ¯ä¸ªappæ³¨å†Œå¤šä¸ª<code>Glidemodule</code>ï¼Œä½†æ˜¯ä¸ä¼šä»¥æŸç§ç‰¹å®šçš„é¡ºåºè°ƒç”¨è¿™äº›moduleã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ çš„appä¸­å¤šä¸ª<code>GlideModules</code>æˆ–è€…ä¾èµ–çš„libraryå·¥ç¨‹ä¸­æœ‰å¤šä¸ª<code>GlideModules</code>ï¼Œä½ å¿…é¡»è´Ÿè´£é¿å…ä»–ä»¬ä¹‹é—´çš„å†²çªã€‚<br>å¦‚æœå†²çªä¸å¯é¿å…ï¼Œappåº”è¯¥å®šä¹‰è‡ªå·±çš„é»˜è®¤moduleï¼Œè¿™ä¸ªmoduleéœ€è¦æ‰‹åŠ¨è§£å†³è¿™äº›å†²çªï¼Œæä¾›æ‰€æœ‰Libraryå·¥ç¨‹æ‰€éœ€è¦çš„ä¾èµ–ã€‚ä½¿ç”¨Gradleçš„å¼€å‘è€…ï¼Œæˆ–è€…ä½¿ç”¨manifeståˆå¹¶çš„å¼€å‘è€…ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„æ ‡ç­¾æ¥æ’é™¤å†²çªçš„moduleã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">â€com.mypackage.MyGlideModuleâ€</span> <span class="attr">tools:node</span>=<span class="string">â€removeâ€</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="å…¨å±€é…ç½®"><a href="#å…¨å±€é…ç½®" class="headerlink" title="å…¨å±€é…ç½®"></a>å…¨å±€é…ç½®</h3><p>ä½ å¯ä»¥é…ç½®ä¸€äº›ä½œç”¨äºæ‰€æœ‰è¯·æ±‚çš„å…¨å±€æ€§é…ç½®é¡¹ã€‚è¯·ä½¿ç”¨<code>GlideModule#applyOptions</code>æ–¹æ³•ä¸­ï¼ˆæ³¨ï¼šä½œä¸ºå‚æ•°ï¼‰æä¾›ç»™ä½ çš„<code>GlideBuilder</code>æ¥é…ç½®ã€‚æœ¬èŠ‚ä»£ç ç¤ºä¾‹ä¸­çš„<code>builder</code>å°±æ˜¯ä¸€ä¸ªGlideModuleå¯¹è±¡ã€‚</p>
<h3 id="ç£ç›˜ç¼“å­˜"><a href="#ç£ç›˜ç¼“å­˜" class="headerlink" title="ç£ç›˜ç¼“å­˜"></a>ç£ç›˜ç¼“å­˜</h3><p>ä½ å¯ä»¥ä½¿ç”¨<code>GlideBuilder</code>çš„<code>setDiskCache()</code>æ–¹æ³•è®¾ç½®ç£ç›˜ç¼“å­˜çš„ä½ç½®ã€å¤§å°ï¼ˆæœ€å¤§å€¼ï¼‰ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<code>DiskCacheAdapter</code>å½»åº•å…³é—­ç¼“å­˜ï¼Œæˆ–è€…è‡ªå·±å®ç°<code>DiskCache</code>æ¥å£æ¥æ¢æ‰é»˜è®¤å®ç°ã€‚ç£ç›˜ç¼“å­˜ç”±<code>DiskCache.Factory</code>æ¥å£çš„å®ä¾‹åœ¨åå°çº¿ç¨‹ä¸­åˆ›å»ºï¼Œä½¿ç”¨åå°çº¿ç¨‹å¯ä»¥é¿å…åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­å‡ºç°é—®é¢˜ã€‚<br>Glideé»˜è®¤ä½¿ç”¨<code>InternalCacheDiskCacheFactory</code>ç±»å»ºç«‹ç£ç›˜ç¼“å­˜ã€‚è¿™ä¸ªå†…éƒ¨ç¼“å­˜å·¥å‚ï¼ˆinternal cache factoryï¼‰ä¼šæŠŠç£ç›˜ç¼“å­˜æ”¾åˆ°åº”ç”¨ç¨‹åºçš„å†…éƒ¨ç¼“å­˜ç›®å½•ä¸­ï¼Œå¹¶ä¸”è®¾ç½®æœ€å¤§ç©ºé—´æ˜¯250MBï¼Œä½¿ç”¨å†…éƒ¨ç¼“å­˜çš„ç›®å½•è€Œä¸æ˜¯SDå¡çš„å¤–éƒ¨ç›®å½•æ„å‘³ç€å…¶ä»–åº”ç”¨ç¨‹åºæ— æ³•è®¿é—®åˆ°ä½ ä¸‹è½½çš„å›¾ç‰‡ã€‚å…·ä½“è¯·æŸ¥çœ‹Androidçš„<a href="http://developer.android.com/intl/zh-cn/guide/topics/data/data-storage.html#filesInternal" target="_blank" rel="noopener">å­˜å‚¨é€‰é¡¹ç›¸å…³æ–‡æ¡£</a>ã€‚</p>
<h4 id="å¤§å°"><a href="#å¤§å°" class="headerlink" title="å¤§å°"></a>å¤§å°</h4><p>ä½¿ç”¨<code>InternalCacheDiskCacheFactory</code>è®¾ç½®ç£ç›˜ç¼“å­˜å¤§å°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">builder.setDiskCache(</span><br><span class="line">  <span class="keyword">new</span> InternalCacheDiskCacheFactory(context, yourSizeInBytes));</span><br></pre></td></tr></table></figure>
<h4 id="ä½ç½®"><a href="#ä½ç½®" class="headerlink" title="ä½ç½®"></a>ä½ç½®</h4><p>ä¹Ÿå¯ä»¥è®¾ç½®ç£ç›˜ç¼“å­˜ä½ç½®<br>ä½ å¯ä»¥ä½¿ç”¨<code>InternalCacheDiskCacheFactory</code>æ¥æŠŠä½ çš„ç£ç›˜ç¼“å­˜æ”¾åˆ°åº”ç”¨ç¨‹åºç§æœ‰çš„å†…éƒ¨å­˜å‚¨ç›®å½•ä¸­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">builder.setDiskCache(</span><br><span class="line">  <span class="keyword">new</span> InternalCacheDiskCacheFactory(context, cacheDirectoryName, yourSizeInBytes));</span><br></pre></td></tr></table></figure>
<p>è¿˜å¯ä»¥ç”¨<code>ExternalCacheDiskCacheFactory</code>æ¥æŠŠä½ çš„ç£ç›˜ç¼“å­˜æ”¾åˆ°sdå¡çš„å…¬å…±ç¼“å­˜ç›®å½•ä¸Šã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">builder.setDiskCache(</span><br><span class="line">  <span class="keyword">new</span> ExternalCacheDiskCacheFactory(context, cacheDirectoryName, yourSizeInBytes));</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ æƒ³ç”¨å…¶ä»–è‡ªå®šä¹‰çš„è·¯å¾„ï¼Œå¯ä»¥ç”¨<code>DiskLruCacheFactory</code>ç±»çš„æ„é€ å‡½æ•°æ¥å®ç°ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// If you can figure out the folder without I/O: </span></span><br><span class="line"><span class="comment">// Calling Context and Environment class methods usually do I/O. </span></span><br><span class="line">builder.setDiskCache( </span><br><span class="line">  <span class="keyword">new</span> DiskLruCacheFactory(getMyCacheLocationWithoutIO(), yourSizeInBytes)); </span><br><span class="line"> </span><br><span class="line"><span class="comment">// In case you want to specify a cache folder ("glide"): </span></span><br><span class="line">builder.setDiskCache( </span><br><span class="line">  <span class="keyword">new</span> DiskLruCacheFactory(getMyCacheLocationWithoutIO(), <span class="string">"glide"</span>, yourSizeInBytes)); </span><br><span class="line"> </span><br><span class="line"><span class="comment">// In case you need to query the file system while determining the folder: </span></span><br><span class="line">builder.setDiskCache(<span class="keyword">new</span> DiskLruCacheFactory(<span class="keyword">new</span> CacheDirectoryGetter() &#123; </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> File <span class="title">getCacheDirectory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getMyCacheLocationBlockingIO(); </span><br><span class="line">    &#125; </span><br><span class="line">&#125;), yourSizeInBytes);</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šè¯·ç‰¢è®°ï¼Œå†™æ­»ä»»ä½•å€¼éƒ½ä¸æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œå°¤å…¶æ˜¯ç›®å½•çš„è·¯å¾„ï¼Œå› ä¸ºè‡ªAndroid4.2å¼€å§‹ï¼Œæ”¯æŒå•è®¾å¤‡å¤šç”¨æˆ·ã€‚</p>
<p>å¦‚æœä½ æƒ³å®Œå…¨æ§åˆ¶ç¼“å­˜çš„åˆ›å»ºï¼Œå¯ä»¥è‡ªå·±å®ç°<code>DiskCache.Factory</code>æ¥å£ï¼Œä½¿ç”¨<code>DiskLruCacheWrapper</code>å¯ä»¥åœ¨ä½ æƒ³è¦çš„ä½ç½®åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å­˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">builder.setDiskCache(<span class="keyword">new</span> DiskCache.Factory() &#123; </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> DiskCache <span class="title">build</span><span class="params">()</span> </span>&#123; </span><br><span class="line">        File cacheLocation = getMyCacheLocationBlockingIO();</span><br><span class="line">        cacheLocation.mkdirs();</span><br><span class="line">        <span class="keyword">return</span> DiskLruCacheWrapper.get(cacheLocation, yourSizeInBytes);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="å†…å­˜ç¼“å­˜å’Œç¼“å­˜æ± "><a href="#å†…å­˜ç¼“å­˜å’Œç¼“å­˜æ± " class="headerlink" title="å†…å­˜ç¼“å­˜å’Œç¼“å­˜æ± "></a>å†…å­˜ç¼“å­˜å’Œç¼“å­˜æ± </h3><p><code>GlideBuilder</code>ç±»å…è®¸ä½ è®¾ç½®å†…å­˜ç¼“å­˜å¤§å°ï¼Œè€Œä¸”å¯ä»¥å®ç°è‡ªå®šä¹‰çš„<code>MemoryCache</code>å’Œ<code>BitmapPool</code>ã€‚</p>
<h4 id="å¤§å°-1"><a href="#å¤§å°-1" class="headerlink" title="å¤§å°"></a>å¤§å°</h4><p>é»˜è®¤å¤§å°æ˜¯ç”±<code>MemorySizeCalculator</code>ç±»å†³å®šçš„ã€‚MemorySizeCalculatorç±»ä¼šè€ƒè™‘è¯¥è®¾å¤‡çš„å±å¹•å¤§å°ã€å¯ç”¨å†…å­˜æ¥è®¡ç®—å‡ºä¸€ä¸ªåˆç†çš„é»˜è®¤å€¼ã€‚å¦‚æœä½ æƒ³è°ƒæ•´è¿™ä¸ªé»˜è®¤å€¼ï¼Œè¯·æ„å»ºè‡ªå·±çš„å®ä¾‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MemorySizeCalculator calculator = <span class="keyword">new</span> MemorySizeCalculator(context);</span><br><span class="line"><span class="keyword">int</span> defaultMemoryCacheSize = calculator.getMemoryCacheSize();</span><br><span class="line"><span class="keyword">int</span> defaultBitmapPoolSize = calculator.getBitmapPoolSize();</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ æƒ³åœ¨åº”ç”¨çš„æŸä¸ªé˜¶æ®µåŠ¨æ€è°ƒæ•´Glideçš„å†…å­˜å ç”¨ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸€ä¸ª<code>MemoryCategory</code>å¹¶ä½¿ç”¨<code>setMemoryCategory()</code>æ–¹æ³•ä¼ å…¥Glideä¸­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Glide.get(context).setMemoryCategory(MemoryCategory.HIGH);</span><br></pre></td></tr></table></figure>
<h4 id="å†…å­˜ç¼“å­˜"><a href="#å†…å­˜ç¼“å­˜" class="headerlink" title="å†…å­˜ç¼“å­˜"></a>å†…å­˜ç¼“å­˜</h4><p>Glideçš„å†…å­˜ç¼“å­˜ä¼šåœ¨å†…å­˜ä¸­æŒæœ‰èµ„æºï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¸è¿›è¡ŒIOæ“ä½œè€Œå¿«é€Ÿè·å¾—å¯ç”¨èµ„æºã€‚<br>ä½ å¯ä»¥ä½¿ç”¨<code>GlideBuilder</code>çš„<code>setMemoryCache()</code>æ–¹æ³•è®¾ç½®å¤§å°ï¼Œæˆ–è€…è®¾ç½®ä½ å…³äºå†…å­˜ç¼“å­˜çš„è‡ªå®šä¹‰å®ç°ï¼ˆè‡ªå®šä¹‰ç±»ï¼‰ã€‚<code>LruResourceCache</code>ç±»æ˜¯Glideçš„é»˜è®¤å®ç°ã€‚ä½ å¯ä»¥é€šè¿‡<code>LruResourceCache</code>çš„æ„é€ å‡½æ•°æ¥é…ç½®å†…å­˜å ç”¨çš„bytesçš„æœ€å¤§å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">builder.setMemoryCache(<span class="keyword">new</span> LruResourceCache(yourSizeInBytes));</span><br></pre></td></tr></table></figure>
<h4 id="Bitmapæ± "><a href="#Bitmapæ± " class="headerlink" title="Bitmapæ± "></a>Bitmapæ± </h4><p>Glideçš„Bitmapæ± ä¸»è¦ä½œç”¨æ˜¯ï¼Œå¯ä»¥è®©å„ç§å°ºå¯¸çš„Bitmapè¢«å¤ç”¨ï¼Œå¯ä»¥å¯è§‚åœ°å‡å°‘ç”±åƒåœ¾å›æ”¶å¼•èµ·çš„å†…å­˜æŠ–åŠ¨ã€‚åœ¨è§£ç å›¾ç‰‡æ—¶ï¼Œéœ€è¦ç»™åƒç´ æ•°ç»„åˆ†é…ç©ºé—´ï¼Œè¿™ä¼šè§¦å‘åƒåœ¾å›æ”¶ã€‚<br>ä½ å¯ä»¥ä½¿ç”¨<code>GlideBuilder</code>çš„<code>setBitmapPool()</code>æ–¹æ³•è®¾ç½®å¤§å°ï¼Œæˆ–è€…è®¾ç½®ä½ å…³äºBitmapæ± çš„è‡ªå®šä¹‰å®ç°ï¼Œ<code>LruBitmapPool</code>ç±»æ˜¯Glideçš„é»˜è®¤å®ç°ã€‚LruBitmapPoolç±»ä½¿ç”¨äº†LRUç®—æ³•ç»´æŠ¤æœ€è¿‘æœ€å¸¸ä½¿ç”¨çš„Bitmapçš„å°ºå¯¸ã€‚ä½ å¯ä»¥é€šè¿‡<code>LruBitmapPool</code>çš„æ„é€ å‡½æ•°é…ç½®å†…å­˜å ç”¨çš„bytesçš„æœ€å¤§å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">builder.setBitmapPool(<span class="keyword">new</span> LruBitmapPool(sizeInBytes));</span><br></pre></td></tr></table></figure>
<h3 id="Bitmapæ ¼å¼"><a href="#Bitmapæ ¼å¼" class="headerlink" title="Bitmapæ ¼å¼"></a>Bitmapæ ¼å¼</h3><p><code>GlideBuilder</code> ç±»ä¹Ÿå…è®¸ä½ é…ç½®ä¸€ä¸ªAppå…¨å±€ä½¿ç”¨çš„Bitmapçš„Configå±æ€§ã€‚<br>Glideé»˜è®¤ä½¿ç”¨RGB_565ï¼Œå› ä¸ºå®ƒæ¯ä¸ªåƒç´ åªéœ€è¦2bytesï¼ˆ16bitï¼‰çš„ç©ºé—´ï¼Œå®ƒä»…éœ€è¦é«˜è´¨é‡å›¾ç‰‡ï¼ˆæ—¢ç³»ç»Ÿé»˜è®¤çš„<code>ARGB_8888</code>ï¼‰ä¸€åŠçš„å†…å­˜ç©ºé—´ã€‚ä½†æ˜¯ï¼Œè¿™å¯¹äºæŸäº›å›¾ç‰‡è¿™å¯èƒ½ä¼šå‡ºç°ã€æ¡å¸¦ã€çš„é—®é¢˜ï¼Œè€Œä¸”å®ƒä¹Ÿä¸æ”¯æŒé€æ˜åº¦ã€‚<br>å¦‚æœåœ¨ä½ çš„åº”ç”¨ä¸­ã€æ¡å¸¦ã€æ˜¯ä¸€ä¸ªé‡è¦çš„é—®é¢˜ï¼Œæˆ–è€…ä½ éœ€è¦å°½å¯èƒ½å¥½çš„å›¾ç‰‡è´¨é‡ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>GlideBuilder</code>çš„<code>setDecodeFormat</code>æ–¹æ³•è®¾ç½®DecodeFormat.ALWAYS_ARGB_8888ä½œä¸ºé¦–é€‰é…ç½®ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">builder.setDecodeFormat(DecodeFormat.ALWAYS_ARGB_8888);</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="è‡ªå®šä¹‰ç›®æ ‡ï¼ˆTargetsï¼‰"><a href="#è‡ªå®šä¹‰ç›®æ ‡ï¼ˆTargetsï¼‰" class="headerlink" title="è‡ªå®šä¹‰ç›®æ ‡ï¼ˆTargetsï¼‰"></a>è‡ªå®šä¹‰ç›®æ ‡ï¼ˆTargetsï¼‰</h2><p>é™¤äº†å¯ä»¥åŠ è½½å›¾åƒï¼Œè§†é¢‘å‰§ç…§ï¼ŒgifåŠ¨ç”»åˆ°Viewä¸­ï¼Œä½ è¿˜å¯ä»¥åŠ è½½ä»–ä»¬åˆ°å®ç°äº†Targetæ¥å£çš„è‡ªå®šä¹‰ç›®æ ‡ä¸­ã€‚</p>
<h3 id="SimpleTarget"><a href="#SimpleTarget" class="headerlink" title="SimpleTarget"></a>SimpleTarget</h3><p>å¦‚æœä½ åªæ˜¯æƒ³åŠ è½½ä¸€ä¸ªBitmapï¼Œå¹¶ä¸æƒ³ç›´æ¥å±•ç¤ºç»™ç”¨æˆ·è€Œæ˜¯æœ‰ä¸€äº›ç‰¹æ®Šç”¨é€”ï¼Œæ¯”å¦‚åœ¨é€šçŸ¥æ ä¸­æ˜¾ç¤ºæˆ–è€…ä½œä¸ºå¤´åƒä¸Šä¼ ã€‚<br>Glideä¹Ÿå¯ä»¥åšåˆ°ã€‚<br>SimpleTargetä¸ºTargetæ¥å£æä¾›äº†å¤§éƒ¨åˆ†çš„é»˜è®¤å®ç°ã€‚ä½ å¯ä»¥ä¸“æ³¨äºå¤„ç†åŠ è½½çš„ç»“æœã€‚<br>ä¸ºäº†ä½¿ç”¨SimpleTargetï¼Œä½ éœ€è¦åœ¨å®ƒçš„æ„é€ å‡½æ•°ä¸­æä¾›ä½ è¦åŠ è½½çš„èµ„æºçš„å®½å’Œé«˜ï¼ˆå•ä½åƒç´ ï¼‰ï¼Œä½ è¿˜éœ€è¦å®ç°<code>onResourceReady(T resource, GlideAnimation animation)</code>æ–¹æ³•ã€‚<br>ä¸€ä¸ªå…¸å‹çš„ä½¿ç”¨SimpleTargetçš„ä¾‹å­å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> myWidth = <span class="number">512</span>;</span><br><span class="line"><span class="keyword">int</span> myHeight = <span class="number">384</span>;</span><br><span class="line"> </span><br><span class="line">Glide.with(yourApplicationContext)) </span><br><span class="line">    .load(youUrl) </span><br><span class="line">    .asBitmap() </span><br><span class="line">    .into(<span class="keyword">new</span> SimpleTarget&lt;Bitmap&gt;(myWidth, myHeight) &#123;</span><br><span class="line">        <span class="meta">@Override</span> </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResourceReady</span><span class="params">(Bitmap bitmap, GlideAnimation anim)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// Do something with bitmap here. </span></span><br><span class="line">        &#125; </span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>
<h4 id="ä¸€äº›è­¦å‘Š"><a href="#ä¸€äº›è­¦å‘Š" class="headerlink" title="ä¸€äº›è­¦å‘Š"></a>ä¸€äº›è­¦å‘Š</h4><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œä½ åŠ è½½ä¸€ä¸ªèµ„æºä¼šæŠŠä»–ä»¬æ”¾åˆ°viewä¸­ã€‚å½“ä½ çš„Activityæˆ–è€…Fragmentè¢«pauseæˆ–è€…destroyæ—¶ï¼ŒGlideä¼šæš‚åœæˆ–å–æ¶ˆåŠ è½½ï¼Œç¡®ä¿ä½ ä¸ä¼šåŠ è½½é‚£äº›æ ¹æœ¬ä¸ä¼šæ˜¾ç¤ºçš„èµ„æºã€‚<br>å¯æ˜¯å½“æˆ‘ä»¬ä½¿ç”¨SimpleTargetçš„æ—¶å€™ï¼Œè¿™å¯èƒ½å¹¶ä¸æ˜¯æˆ‘ä»¬å¸Œæœ›çš„è¡Œä¸ºã€‚æ‰€ä»¥ï¼Œå½“ä½ è°ƒç”¨<code>Glide.with(context)</code>çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä¼ å…¥Applicationçš„contextï¼Œè€Œä¸æ˜¯ä¼ å…¥Activityæˆ–è€…Fragmentã€‚<br>æ­¤å¤–ï¼Œè€ƒè™‘åˆ°é•¿æ—¶é—´çš„åŠ è½½æ“ä½œå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œè¯·è€ƒè™‘ä½¿ç”¨é™æ€å†…éƒ¨ç±»ï¼Œè€Œä¸æ˜¯åŒ¿åå†…éƒ¨ç±»ã€‚</p>
<h3 id="ViewTarget"><a href="#ViewTarget" class="headerlink" title="ViewTarget"></a>ViewTarget</h3><p>å¦‚æœä½ æƒ³åŠ è½½ä¸€ä¸ªå›¾ç‰‡åˆ°Viewä¸­ï¼Œä½†æ˜¯ä½ æƒ³è§‚å¯Ÿæˆ–è€…è¦†ç›–Glideçš„é»˜è®¤è¡Œä¸ºã€‚ä½ å¯ä»¥è¦†ç›–ViewTargetæˆ–è€…å®ƒçš„å­ç±»ã€‚<br>å½“ä½ æƒ³è®©Glideæ¥è·å–viewçš„çš„å¤§å°ï¼Œä½†æ˜¯ç”±è‡ªå·±æ¥å¯åŠ¨åŠ¨ç”»å’Œè®¾ç½®èµ„æºåˆ°viewä¸­ï¼ŒViewTargetæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚å¦‚æœä½ è¦åŠ è½½ä¸€ä¸ªå›¾ç‰‡åˆ°ImageViewä¹‹å¤–çš„è‡ªå®šä¹‰viewä¸­ï¼Œé‚£ä¹ˆImageViewTargetæˆ–è€…å®ƒçš„å­ç±»å°±ä¸èƒ½æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œæ­¤æ—¶ç»§æ‰¿ViewTargetå°±ç‰¹åˆ«åˆé€‚ã€‚<br>ä½ å¯ä»¥é™æ€çš„å®šä¹‰ä¸€ä¸ªViewTargetçš„å­ç±»ï¼Œæˆ–è€…ä¼ é€’ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»åˆ°ä½ çš„åŠ è½½è°ƒç”¨é‡Œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(yourFragment)</span><br><span class="line">    .load(yourUrl)</span><br><span class="line">    .into(<span class="keyword">new</span> ViewTarget&lt;YourViewClass, GlideDrawable&gt;(yourViewObject) &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResourceReady</span><span class="params">(GlideDrawable resource, GlideAnimation anim)</span> </span>&#123;</span><br><span class="line">            YourViewClass myView = <span class="keyword">this</span>.view;</span><br><span class="line">            <span class="comment">// Set your resource on myView and/or start your animation here.</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œå¦‚æœä½ æƒ³æŒ‡å®šåŠ è½½Bitmapè¿˜æ˜¯GifDrawableï¼Œè¯·åœ¨<code>.load(yourUrl)</code>è°ƒç”¨åé¢ç›´æ¥æ·»åŠ <code>.asBitmap()</code>æˆ–è€…<code>.asGif()</code>ï¼ŒåŒæ—¶å°†ViewTargetçš„ç±»å‹å‚æ•°<code>GlideDrawable</code>æ¢æˆå¯¹åº”åŠ è½½çš„ç±»å‹ã€‚<br>ä¸ºäº†æ›´å¤šæ§åˆ¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨Targetå®ç°<code>LifecycleListener</code>å›è°ƒï¼Œ<code>onStart()</code>ã€<code>onStop()</code>æˆ–è€…<code>onDestroy()</code>ä¼šå’Œä½ viewæ‰€åœ¨çš„fragmentçš„ç”Ÿå‘½å‘¨æœŸä¿æŒåŒæ­¥ã€‚</p>
<h3 id="è¦†ç›–é»˜è®¤è¡Œä¸º"><a href="#è¦†ç›–é»˜è®¤è¡Œä¸º" class="headerlink" title="è¦†ç›–é»˜è®¤è¡Œä¸º"></a>è¦†ç›–é»˜è®¤è¡Œä¸º</h3><p>å¦‚æœä½ åªæƒ³è§‚å¯Ÿä¸æƒ³ä¿®æ”¹Glideçš„é»˜è®¤è¡Œä¸ºï¼Œä½ å¯ä»¥ç»§æ‰¿ä»»ä½•ä¸€ä¸ªGlideå¯¹ImageViewTargetsçš„é»˜è®¤å®ç°ã€‚</p>
<ul>
<li>GlideDrawableImageViewTarget - é»˜è®¤çš„Targetï¼Œç”¨äºæ­£å¸¸çš„åŠ è½½å’Œ<code>asGif()</code>ã€‚</li>
<li>BitmapImageViewTarget - å½“ä½¿ç”¨<code>asBitmap()</code>åŠ è½½æ—¶ï¼Œä½¿ç”¨çš„é»˜è®¤Targetã€‚</li>
</ul>
<p>åªæœ‰ä½ åœ¨æ¯ä¸ªæ–¹æ³•é‡Œé¢è°ƒç”¨<code>super()</code>ï¼Œå°†ä¼šä¿ç•™é»˜è®¤çš„è¡Œä¸ºï¼ŒåŒæ—¶è¿˜å¯ä»¥æ·»åŠ ä¸€äº›ä½ å¸Œæœ›çš„åŠŸèƒ½ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæƒ³è¦ç”Ÿæˆä¸€ä¸ª<a href="http://chris.banes.me/2014/07/04/palette-preview/" target="_blank" rel="noopener">è°ƒè‰²æ¿</a>ï¼Œä½ å¯ä»¥è¿™æ ·åšã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(yourFragment) </span><br><span class="line">    .load(yourUrl) </span><br><span class="line">    .asBitmap() </span><br><span class="line">    .into(<span class="keyword">new</span> BitmapImageViewTarget(yourImageView)) &#123; </span><br><span class="line">        <span class="meta">@Override</span> </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResourceReady</span><span class="params">(Bitmap bitmap, GlideAnimation anim)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>.onResourceReady(bitmap, anim);</span><br><span class="line">            Palette.generateAsync(bitmap, <span class="keyword">new</span> Palette.PaletteAsyncListener() &#123;  </span><br><span class="line">                <span class="meta">@Override</span> </span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onGenerated</span><span class="params">(Palette palette)</span> </span>&#123;</span><br><span class="line">                    <span class="comment">// Here's your generated palette </span></span><br><span class="line">                &#125; </span><br><span class="line">            &#125;); </span><br><span class="line">        &#125; </span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p>è™½ç„¶è¿™ä¸ªä¾‹å­è¿˜ä¸é”™ï¼Œä½†æ˜¯ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä¸æ¨èç”¨è¿™ä¸ªæ–¹å¼ç”Ÿæˆè°ƒè‰²æ¿ã€‚è¯·æŸ¥çœ‹Glideçš„ <code>ResourceTranscoder</code> æ¥å£å’Œ<code>.transcode()</code>æ–¹æ³•ï¼Œè€ƒè™‘è¿”å›ä¸€ä¸ªåŒ…å«Bitmapå’Œè°ƒè‰²æ¿çš„è‡ªå®šä¹‰èµ„æºã€‚è°ƒè‰²æ¿å¯åœ¨åœ¨åå°çº¿ç¨‹ç”Ÿæˆã€‚ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿæ›´å¤šå†…å®¹ä¼šåœ¨ä»¥åæ¨å‡ºã€‚ã€‚ã€‚</p>
<hr>
<h2 id="è°ƒè¯•å’Œé”™è¯¯å¤„ç†"><a href="#è°ƒè¯•å’Œé”™è¯¯å¤„ç†" class="headerlink" title="è°ƒè¯•å’Œé”™è¯¯å¤„ç†"></a>è°ƒè¯•å’Œé”™è¯¯å¤„ç†</h2><p>Glideåœ¨åŠ è½½è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šæ‰“æ—¥å¿—ã€‚Glideä¸ºä½ æä¾›äº†ä¸¤ç§æ–¹å¼æŸ¥çœ‹å’Œå¤„ç†è¿™äº›å¼‚å¸¸ã€‚</p>
<h3 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h3><p>ä»…ä»…ä¸ºäº†æŸ¥çœ‹å¼‚å¸¸çš„è¯ï¼Œä½ å¯ä»¥ä¸º<code>GenericRequest</code>ç±»æ‰“å¼€Debugæ—¥å¿—ã€‚è¿™ä¸ªç±»å¤„ç†æ‰€æœ‰åª’ä½“èµ„æºçš„åŠ è½½å“åº”ï¼ˆresponseï¼‰ã€‚ä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œé‡Œè¿è¡Œï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell setprop log.tag.GenericRequest DEBUG</span><br></pre></td></tr></table></figure>
<p>æƒ³è¦åŒ…æ‹¬è¯¦ç»†çš„è¯·æ±‚æ—¶åºä¿¡æ¯ï¼Œä½ å¯ä»¥æŠŠ<code>DEBUG</code>ç¼“å­˜<code>VERBOSE</code>ã€‚</p>
<p>å…³é—­æ—¥å¿—ä½¿ç”¨ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell setprop log.tag.GenericRequest ERROR</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒè¯•å·¥ä½œæµ"><a href="#è°ƒè¯•å·¥ä½œæµ" class="headerlink" title="è°ƒè¯•å·¥ä½œæµ"></a>è°ƒè¯•<a href="https://docs.google.com/drawings/d/1KyOJkNd5Dlm8_awZpftzW7KtqgNR6GURvuF6RfB210g/edit" target="_blank" rel="noopener">å·¥ä½œæµ</a></h3><p>ä¸ºäº†æŸ¥çœ‹å†…éƒ¨å¼•æ“ï¼ˆengineï¼‰å¦‚ä½•ä»¥åŠä½•æ—¶æŸ¥æ‰¾åˆ°èµ„æºï¼Œä½ å¯ä»¥æ‰“å¼€æ—¥å¿—ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb shell setprop log.tag.Engine VERBOSE</span><br><span class="line">adb shell setprop log.tag.EngineJob VERBOSE</span><br><span class="line">adb shell setprop log.tag.DecodeJob VERBOSE</span><br></pre></td></tr></table></figure>
<p>æ‰“å¼€è¿™ä¸ªæœ‰åŠ©äºä½ æ‰¾å‡ºä¸ºä»€ä¹ˆæŸä¸ªèµ„æºæ²¡æœ‰ä»å†…å­˜ç¼“å­˜ä¸­åŠ è½½ï¼Œä¸ºä»€ä¹ˆè¯·æ±‚å†æ¬¡ä»å¤–éƒ¨çš„urlä¸‹è½½æ•°æ®ã€‚è¿™ä¹Ÿå¯ä»¥å¸®åŠ©ä½ äº†è§£ï¼šå¦‚æœæƒ³å‘½ä¸­ç£ç›˜ç¼“å­˜ï¼Œä»€ä¹ˆæ ·çš„å‚æ•°éœ€è¦åŒ¹é…ã€‚å¯ç”¨<code>DecodeJob</code>æ—¥å¿—ä¹Ÿå¯ä»¥å¸®åŠ©ä½ å»å®šä½è‡ªå®šä¹‰transformation/decoder/encoderç›¸å…³çš„é—®é¢˜ã€‚</p>
<h3 id="ç›‘å¬è¯·æ±‚-RequestListener"><a href="#ç›‘å¬è¯·æ±‚-RequestListener" class="headerlink" title="ç›‘å¬è¯·æ±‚-RequestListener"></a>ç›‘å¬è¯·æ±‚-RequestListener</h3><p>è™½ç„¶å¯ç”¨debugæ—¥å¿—å¾ˆç®€å•ï¼Œä½†æ˜¯åªæœ‰åœ¨ä½ å¯ä»¥è¿æ¥åˆ°è®¾å¤‡æ—¶æ‰èƒ½è¿™æ ·å¹²ã€‚ä¸ºäº†æŠŠGlideé›†æˆåˆ°å·²æœ‰çš„æ›´ä¸“ä¸šçš„é”™è¯¯æ—¥å¿—ç³»ç»Ÿã€‚ä½ å¯ä»¥ä½¿ç”¨<code>RequestListener</code>ç±»çš„<code>onException()</code>ã€‚å½“è¯·æ±‚å¤±è´¥æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šå‘ŠçŸ¥ä½ å¯¼è‡´å¤±è´¥çš„<code>å¼‚å¸¸</code>(Exception)ï¼Œå¦‚æœè§£ç å™¨ï¼ˆDecoderï¼‰ä¸èƒ½ä»æ•°æ®ä¸­è§£æå‡ºä»»ä½•æœ‰ç”¨çš„ä¿¡æ¯ï¼ŒExceptionä¹Ÿå¯èƒ½ä¼ <code>null</code>ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>listener()</code>APIä¼ ä¸€ä¸ªä½ çš„ç›‘å¬å™¨ï¼ˆlistenerï¼‰åˆ°æ¯ä¸€ä¸ªè¯·æ±‚ä¸­ã€‚<br>è¯·ç¡®ä¿<code>onException()</code>è¿”å›<code>false</code>ï¼Œä»¥å…è¦†ç›–äº†Glideçš„é»˜è®¤é”™è¯¯å¤„ç†è¡Œä¸ºï¼ˆä¾‹å¦‚ï¼Œå®ƒé»˜è®¤ä¼šé€šçŸ¥<code>Target</code>è¿™ä¸ªerrorï¼‰ã€‚<br>è¿™æ˜¯ä¸€ä¸ªå¿«é€Ÿè°ƒè¯•çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// example usage: .listener(new LoggingListener&lt;String, GlideDrawable&gt;()) </span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggingListener</span>&lt;<span class="title">T</span>, <span class="title">R</span>&gt; <span class="keyword">implements</span> <span class="title">RequestListener</span>&lt;<span class="title">T</span>, <span class="title">R</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onException</span><span class="params">(Exception e, Object model, Target target, <span class="keyword">boolean</span> isFirstResource)</span> </span>&#123;</span><br><span class="line">        android.util.Log.d(<span class="string">"GLIDE"</span>, String.format(Locale.ROOT,</span><br><span class="line">                <span class="string">"onException(%s, %s, %s, %s)"</span>, e, model, target, isFirstResource), e);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onResourceReady</span><span class="params">(Object resource, Object model, Target target, <span class="keyword">boolean</span> isFromMemoryCache, <span class="keyword">boolean</span> isFirstResource)</span> </span>&#123;</span><br><span class="line">        android.util.Log.d(<span class="string">"GLIDE"</span>, String.format(Locale.ROOT,</span><br><span class="line">                <span class="string">"onResourceReady(%s, %s, %s, %s, %s)"</span>, resource, model, target, isFromMemoryCache, isFirstResource));</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç¡®ä¿å‘ç‰ˆå‰ç§»é™¤ç›¸å…³ä»£ç </strong></p>
<h3 id="æ›´å¤šæ—¥å¿—"><a href="#æ›´å¤šæ—¥å¿—" class="headerlink" title="æ›´å¤šæ—¥å¿—"></a>æ›´å¤šæ—¥å¿—</h3><p>è¿™ä¸ªåˆ—è¡¨æ˜¯ç»™3.6.0ç‰ˆæœ¬ç”¨çš„ï¼Œå¯èƒ½ä¸å®Œæ•´ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">cd .../android-sdk/platform-tools</span><br><span class="line">adb shell setprop log.tag.AnimatedGifEncoder VERBOSE</span><br><span class="line">adb shell setprop log.tag.AssetUriFetcher VERBOSE</span><br><span class="line">adb shell setprop log.tag.BitmapEncoder VERBOSE</span><br><span class="line">adb shell setprop log.tag.BufferedIs VERBOSE</span><br><span class="line">adb shell setprop log.tag.ByteArrayPool VERBOSE</span><br><span class="line">adb shell setprop log.tag.CacheLoader VERBOSE</span><br><span class="line">adb shell setprop log.tag.ContentLengthStream VERBOSE</span><br><span class="line">adb shell setprop log.tag.DecodeJob VERBOSE</span><br><span class="line">adb shell setprop log.tag.DiskLruCacheWrapper VERBOSE</span><br><span class="line">adb shell setprop log.tag.Downsampler VERBOSE</span><br><span class="line">adb shell setprop log.tag.Engine VERBOSE</span><br><span class="line">adb shell setprop log.tag.EngineRunnable VERBOSE</span><br><span class="line">adb shell setprop log.tag.GenericRequest VERBOSE</span><br><span class="line">adb shell setprop log.tag.GifDecoder VERBOSE</span><br><span class="line">adb shell setprop log.tag.GifEncoder VERBOSE</span><br><span class="line">adb shell setprop log.tag.GifHeaderParser VERBOSE</span><br><span class="line">adb shell setprop log.tag.GifResourceDecoder VERBOSE</span><br><span class="line">adb shell setprop log.tag.Glide VERBOSE</span><br><span class="line">adb shell setprop log.tag.ImageHeaderParser VERBOSE</span><br><span class="line">adb shell setprop log.tag.ImageVideoDecoder VERBOSE</span><br><span class="line">adb shell setprop log.tag.IVML VERBOSE</span><br><span class="line">adb shell setprop log.tag.LocalUriFetcher VERBOSE</span><br><span class="line">adb shell setprop log.tag.LruBitmapPool VERBOSE</span><br><span class="line">adb shell setprop log.tag.MediaStoreThumbFetcher VERBOSE</span><br><span class="line">adb shell setprop log.tag.MemorySizeCalculator VERBOSE</span><br><span class="line">adb shell setprop log.tag.PreFillRunner VERBOSE</span><br><span class="line">adb shell setprop log.tag.ResourceLoader VERBOSE</span><br><span class="line">adb shell setprop log.tag.RMRetriever VERBOSE</span><br><span class="line">adb shell setprop log.tag.StreamEncoder VERBOSE</span><br><span class="line">adb shell setprop log.tag.TransformationUtils VERBOSE</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="ä½¿ç”¨Glideä¸‹è½½è‡ªå®šä¹‰å¤§å°çš„å›¾ç‰‡"><a href="#ä½¿ç”¨Glideä¸‹è½½è‡ªå®šä¹‰å¤§å°çš„å›¾ç‰‡" class="headerlink" title="ä½¿ç”¨Glideä¸‹è½½è‡ªå®šä¹‰å¤§å°çš„å›¾ç‰‡"></a>ä½¿ç”¨Glideä¸‹è½½è‡ªå®šä¹‰å¤§å°çš„å›¾ç‰‡</h2><p>å¼€å‘è€…å¯ä»¥é€šè¿‡Glideçš„ModelLoaderæ¥å£è·å¾—å›¾ç‰‡å¤§å°ï¼Œå¹¶æ ¹æ®è¿™ä¸ªå¤§å°æ¥åŠ è½½ä¸€ä¸ªåˆé€‚å°ºå¯¸çš„å›¾ç‰‡urlã€‚<br>ä½¿ç”¨åˆé€‚å°ºå¯¸çš„å›¾ç‰‡å¯ä»¥èŠ‚çº¦å¸¦å®½ï¼Œè®¾å¤‡çš„å­˜å‚¨ç©ºé—´ï¼Œè¿˜å¯ä»¥æå‡appæ€§èƒ½ã€‚<br>2014å¹´çš„Google I/O appå›¢é˜Ÿå†™äº†ä¸€ç¯‡å…³äºå¦‚ä½•ä½¿ç”¨ModelLoaderæ¥å£è°ƒæ•´åŠ è½½çš„å›¾ç‰‡å¤§å°çš„æ–‡ç« ã€‚è¯·åœ¨GitHubä¸ŠæŸ¥çœ‹ <a href="https://github.com/google/iosched/blob/master/doc/IMAGES.md" target="_blank" rel="noopener">I/O appçš„æºç </a>ã€‚<br>ä¸ºäº†å®ç°è‡ªå®šä¹‰çš„ModelLoaderæ¥é€šè¿‡http/httpsä¸‹è½½å›¾ç‰‡ï¼Œå¯ä»¥ç»§æ‰¿BaseGlideUrlLoaderè¿™ä¸ªç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyDataModel</span> </span>&#123; </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">buildUrl</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span>;</span><br><span class="line">&#125;  </span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyUrlLoader</span> <span class="keyword">extends</span> <span class="title">BaseGlideUrlLoader</span>&lt;<span class="title">MyDataModel</span>&gt; </span>&#123; </span><br><span class="line">    <span class="meta">@Override</span> </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">getUrl</span><span class="params">(MyDataModel model, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Construct the url for the correct size here. </span></span><br><span class="line">        <span class="keyword">return</span> model.buildUrl(width, height);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œä½ å°±å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„ModelLoaderæ¥åŠ è½½å›¾ç‰‡äº†ï¼Œå…¶ä»–çš„äº‹æƒ…ä¼šè‡ªåŠ¨å®Œæˆï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(yourFragment)</span><br><span class="line">    .using(<span class="keyword">new</span> MyUrlLoader())</span><br><span class="line">    .load(yourModel)</span><br><span class="line">    .into(yourView);</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ æƒ³é¿å…è°ƒç”¨<code>.using(new  MyUrlLoader())</code>ï¼Œä½ å¯ä»¥å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„<code>ModelLoaderFactory</code>ï¼Œå¹¶åœ¨<code>GlideModule</code>ä¸­æ³¨å†Œå®ƒã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyGlideModule</span> <span class="keyword">implements</span> <span class="title">GlideModule</span> </span>&#123; </span><br><span class="line">    ... </span><br><span class="line">    <span class="meta">@Override</span> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerComponents</span><span class="params">(Context context, Glide glide)</span> </span>&#123;</span><br><span class="line">        glide.register(MyDataModel<span class="class">.<span class="keyword">class</span>, <span class="title">InputStream</span>.<span class="title">class</span>, </span></span><br><span class="line"><span class="class">            <span class="title">new</span> <span class="title">MyUrlLoader</span>.<span class="title">Factory</span>())</span>; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨å†ŒModelLoaderFactoryä¹‹åï¼Œä½ å°±ä¸ç”¨è°ƒç”¨<code>.using()</code>äº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(yourFragment)</span><br><span class="line">    .load(yourModel)</span><br><span class="line">    .into(yourView);</span><br></pre></td></tr></table></figure>
<p>å…¶ä»–çš„ä¾‹å­ï¼Œå…³äºå¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰ModelLoaderåŠ è½½å„ç§å°ºå¯¸çš„å›¾ç‰‡ï¼Œè¯·æŸ¥çœ‹<a href="https://github.com/bumptech/glide/blob/master/samples/flickr/src/main/java/com/bumptech/glide/samples/flickr/FlickrModelLoader.java" target="_blank" rel="noopener">Flickerç¤ºä¾‹åº”ç”¨</a>ï¼Œå’Œ<a href="https://github.com/bumptech/glide/blob/master/samples/giphy/src/main/java/com/bumptech/glide/samples/giphy/GiphyModelLoader.java" target="_blank" rel="noopener">Giphyç¤ºä¾‹åº”ç”¨</a>ã€‚</p>
<hr>
<h2 id="é›†æˆï¼ˆIntegrationï¼‰åº“-Glideä¸å…¶ä»–åº“æ•´åˆ"><a href="#é›†æˆï¼ˆIntegrationï¼‰åº“-Glideä¸å…¶ä»–åº“æ•´åˆ" class="headerlink" title="é›†æˆï¼ˆIntegrationï¼‰åº“-Glideä¸å…¶ä»–åº“æ•´åˆ"></a>é›†æˆï¼ˆIntegrationï¼‰åº“-Glideä¸å…¶ä»–åº“æ•´åˆ</h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><h4 id="ä»€ä¹ˆæ˜¯é›†æˆåº“ï¼ˆIntegration-Libraryï¼‰"><a href="#ä»€ä¹ˆæ˜¯é›†æˆåº“ï¼ˆIntegration-Libraryï¼‰" class="headerlink" title="ä»€ä¹ˆæ˜¯é›†æˆåº“ï¼ˆIntegration Libraryï¼‰"></a>ä»€ä¹ˆæ˜¯é›†æˆåº“ï¼ˆIntegration Libraryï¼‰</h4><p>GlideåŒ…æ‹¬ä¸€ç³»åˆ—å°å·§å¯é…ç½®çš„é›†æˆåº“ï¼Œè¿™äº›åº“å¯ä»¥è®©Glideä¸å¤–éƒ¨çš„åº“ç›¸ç»“åˆã€‚ç°åœ¨é›†æˆåº“å¯ä»¥ä½¿Glideæ”¯æŒVolleyå’ŒOkHttpçš„http/httpsè¯·æ±‚ã€‚</p>
<p>æˆ‘ä»¬åšä¿¡ï¼Œæ‚¨æ‰€é€‰æ‹©çš„å®¢æˆ·ç«¯åª’ä½“åº“æ—¢ä¸åº”è¯¥å†³å®šä½ åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„ç½‘ç»œåº“ï¼Œä¹Ÿä¸éœ€è¦ä½ ä»…ä»…ä¸ºäº†åŠ è½½å›¾åƒé¢å¤–æ·»åŠ ç½‘ç»œåº“ã€‚é›†æˆåº“å’ŒGlideçš„ModelLoaderç³»ç»Ÿï¼Œå…è®¸å¼€å‘äººå‘˜å¯¹æ‰€æœ‰ç½‘ç»œè¯·æ±‚ä½¿ç”¨ç»Ÿä¸€çš„ç½‘ç»œåº“ã€‚</p>
<h4 id="ä¸ºä»€ä¹ˆæ²¡æœ‰XXXåº“çš„å®ç°"><a href="#ä¸ºä»€ä¹ˆæ²¡æœ‰XXXåº“çš„å®ç°" class="headerlink" title="ä¸ºä»€ä¹ˆæ²¡æœ‰XXXåº“çš„å®ç°"></a>ä¸ºä»€ä¹ˆæ²¡æœ‰XXXåº“çš„å®ç°</h4><p>å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰ä¸ºè¿™ä¸ªåº“å†™é›†æˆåº“ã€‚OkHttpå’ŒVolleyæ˜¯ååˆ†æµè¡Œçš„åº“ï¼Œè®¸å¤šå¼€å‘è€…éƒ½ä½¿ç”¨ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬ä¸æ˜¯æ’æ–¥å…¶ä»–åº“ï¼Œå¦‚æœä½ å†™äº†å…¶ä»–åº“çš„<code>ModelLoader</code>å¹¶ä¸”æ‰“ç®—å¼€æºï¼Œæˆ‘ä»¬å¾ˆä¹æ„çœ‹åˆ°è¿™æ ·çš„æäº¤è¯·æ±‚ï¼ˆpull requestï¼‰ã€‚</p>
<h4 id="æˆ‘å¦‚ä½•ä¾èµ–ä¸€ä¸ªé›†æˆåº“å‘¢ï¼Ÿ"><a href="#æˆ‘å¦‚ä½•ä¾èµ–ä¸€ä¸ªé›†æˆåº“å‘¢ï¼Ÿ" class="headerlink" title="æˆ‘å¦‚ä½•ä¾èµ–ä¸€ä¸ªé›†æˆåº“å‘¢ï¼Ÿ"></a>æˆ‘å¦‚ä½•ä¾èµ–ä¸€ä¸ªé›†æˆåº“å‘¢ï¼Ÿ</h4><p>ä¾èµ–ä»»ä½•çš„é›†æˆåº“éœ€è¦ä¸¤gä¸ªæ­¥éª¤ã€‚</p>
<ol>
<li>æ·»åŠ ç›¸åº”çš„ç»§æ‰¿åº“çš„Maven/Gradle/jarä¾èµ–ï¼Œå› ä¸ºä½œä¸ºå¯é€‰é¡¹çš„é›†æˆåº“å¹¶ä¸åŒ…å«åœ¨glideçš„jarä¾èµ–ä¸­ã€‚</li>
<li>ç¡®ä¿appåŒ…å«äº†é›†æˆåº“çš„GlideModuleï¼Œå…·ä½“å†…å®¹çœ‹<a href="https://github.com/bumptech/glide/wiki/Configuration" target="_blank" rel="noopener">é…ç½®wiki</a>éƒ¨åˆ†ã€‚å¯¹äºGlideé›†æˆåº“çš„å…·ä½“è¯´æ˜è§ä¸‹é¢ã€‚</li>
</ol>
<h4 id="æˆ‘åº”å½“é€‰æ‹©å“ªä¸ªç‰ˆæœ¬ï¼Ÿ"><a href="#æˆ‘åº”å½“é€‰æ‹©å“ªä¸ªç‰ˆæœ¬ï¼Ÿ" class="headerlink" title="æˆ‘åº”å½“é€‰æ‹©å“ªä¸ªç‰ˆæœ¬ï¼Ÿ"></a>æˆ‘åº”å½“é€‰æ‹©å“ªä¸ªç‰ˆæœ¬ï¼Ÿ</h4><p>é›†æˆåº“çš„ç‰ˆæœ¬è·Ÿéšç€Glideçš„releaseç‰ˆæœ¬ã€‚ä½†æ˜¯å¤šäº†ä¸€ä¸ªä¸åŒçš„æ•°å­—ã€‚ç¡®ä¿é€‰æ‹©ä¸æ‰€ä¾èµ–çš„Glideå¯¹åº”çš„é›†æˆåº“ã€‚åœ¨<a href="https://github.com/bumptech/glide/releases" target="_blank" rel="noopener">releaseé¡µ</a>æŸ¥çœ‹.<br>ç½‘ç»œåº“æœ‰è‡ªå·±çš„ç‰ˆæœ¬å·ã€‚ç»§æ‰¿åº“ä¼šä¾èµ–çš„åº“å°±æ˜¯ä½ åœ¨Maven/Gradleä¸­æŒ‡å®šçš„åº“ã€‚ä½ å¯ä»¥é€šè¿‡ç‰ˆæœ¬å·æ¥æŒ‡å®šå…·ä½“ä¾èµ–çš„ç½‘ç»œåº“ã€‚ï¼Ÿï¼Ÿ</p>
<h3 id="Volley"><a href="#Volley" class="headerlink" title="Volley"></a>Volley</h3><p>Volleyæ˜¯ä¸€ä¸ªHttpåº“ï¼Œå¯ä»¥ä½¿Androidä¸Šçš„ç½‘ç»œè¯·æ±‚æ›´ç®€å•ï¼Œæ›´å¿«é€Ÿã€‚</p>
<h4 id="Gradleä¸­ä½¿ç”¨Volley"><a href="#Gradleä¸­ä½¿ç”¨Volley" class="headerlink" title="Gradleä¸­ä½¿ç”¨Volley"></a>Gradleä¸­ä½¿ç”¨Volley</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile <span class="string">'com.github.bumptech.glide:volley-integration:1.3.1@aar'</span></span><br><span class="line">    <span class="comment">//compile 'com.mcxiaoke.volley:library:1.0.8'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é›†æˆåº“çš„<code>GlideModule</code>ä¼šè‡ªåŠ¨åˆå¹¶åˆ°ä½ appçš„manifestä¸­ã€‚</p>
<h4 id="Mavenä¸­æ˜¯Volley"><a href="#Mavenä¸­æ˜¯Volley" class="headerlink" title="Mavenä¸­æ˜¯Volley"></a>Mavenä¸­æ˜¯Volley</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.bumptech.glide<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>volley-integration<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>aar<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mcxiaoke.volley<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>library<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>aar<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¯·æŸ¥çœ‹å¯¹åº”çš„manifestç« èŠ‚ï¼Œäº†è§£å¦‚ä½•æ·»åŠ å¯¹åº”çš„GlideModuleã€‚</p>
<h4 id="æ‰‹åŠ¨æ·»åŠ Volley"><a href="#æ‰‹åŠ¨æ·»åŠ Volley" class="headerlink" title="æ‰‹åŠ¨æ·»åŠ Volley"></a>æ‰‹åŠ¨æ·»åŠ Volley</h4><p>ä»<a href="https://github.com/bumptech/glide/releases" target="_blank" rel="noopener">releaseé¡µ</a>ä¸‹è½½<a href="https://github.com/bumptech/glide/releases/download/v3.6.1/glide-volley-integration-1.3.1.jar" target="_blank" rel="noopener">glide-volley-integration-<version>.jar </version></a>ã€‚å¹¶æ·»åŠ åˆ°ä½ appçš„ç¼–è¯‘è·¯å¾„ä¸­(compile classpath)ã€‚</p>
<p>è¯·æŸ¥çœ‹å¯¹åº”çš„manifestç« èŠ‚ï¼Œäº†è§£å¦‚ä½•æ·»åŠ å¯¹åº”çš„GlideModuleã€‚</p>
<h4 id="Volleyçš„Manifest"><a href="#Volleyçš„Manifest" class="headerlink" title="Volleyçš„Manifest"></a>Volleyçš„Manifest</h4><p>å¦‚æœä½ ä½¿ç”¨é‚£äº›ä¸æ”¯æŒmanifeståˆå¹¶çš„ç¼–è¯‘ç³»ç»Ÿï¼ˆå¦‚Mavenï¼ŒAntï¼‰ï¼Œä½ å¿…é¡»æ‰‹åŠ¨æ·»åŠ <code>GlideModule</code>çš„metadataæ ‡ç­¾åˆ°<code>AndroidManifest.xml</code>ä¸­ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">"com.bumptech.glide.integration.volley.VolleyGlideModule"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:value</span>=<span class="string">"GlideModule"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="Volleyçš„æ··æ·†è®¾ç½®"><a href="#Volleyçš„æ··æ·†è®¾ç½®" class="headerlink" title="Volleyçš„æ··æ·†è®¾ç½®"></a>Volleyçš„æ··æ·†è®¾ç½®</h4><p>æ— è®ºä½¿ç”¨ä»€ä¹ˆç¼–è¯‘ç³»ç»Ÿï¼Œä¸è¦æ··æ·†<code>VolleyGlideModule</code>ç±»ï¼Œå®ƒéœ€è¦è¢«åå°„æ¥å®ä¾‹åŒ–ã€‚æ·»åŠ ä¸‹é¢çš„ä»£ç åˆ°<code>proguard.cfg</code>æ–‡ä»¶ï¼ˆæˆ–è€…æŸ¥çœ‹â€œé€šç”¨éƒ¨åˆ†â€ï¼‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-keep <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">bumptech</span>.<span class="title">glide</span>.<span class="title">integration</span>.<span class="title">volley</span>.<span class="title">VolleyGlideModule</span></span></span><br></pre></td></tr></table></figure>
<h3 id="OkHttp"><a href="#OkHttp" class="headerlink" title="OkHttp"></a>OkHttp</h3><p>OKHttpæ˜¯ä¸€ä¸ªé«˜æ•ˆä¸”æ˜“äºä½¿ç”¨çš„Httpå®¢æˆ·ç«¯ã€‚</p>
<h4 id="Gradleä¸­ä½¿ç”¨OkHttp"><a href="#Gradleä¸­ä½¿ç”¨OkHttp" class="headerlink" title="Gradleä¸­ä½¿ç”¨OkHttp"></a>Gradleä¸­ä½¿ç”¨OkHttp</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile <span class="string">'com.github.bumptech.glide:okhttp-integration:1.3.1@aar'</span></span><br><span class="line">    <span class="comment">//compile 'com.squareup.okhttp:okhttp:2.2.0'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é›†æˆåº“çš„<code>GlideModule</code>ä¼šè‡ªåŠ¨åˆå¹¶åˆ°ä½ appçš„manifestä¸­ã€‚</p>
<h4 id="Mavenä¸­æ˜¯OkHttp"><a href="#Mavenä¸­æ˜¯OkHttp" class="headerlink" title="Mavenä¸­æ˜¯OkHttp"></a>Mavenä¸­æ˜¯OkHttp</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.bumptech.glide<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>okhttp-integration<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>aar<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&lt;dependency&gt;</span></span><br><span class="line"><span class="comment">    &lt;groupId&gt;com.squareup.okhttp&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">    &lt;artifactId&gt;okhttp&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">    &lt;version&gt;2.2.0&lt;/version&gt;</span></span><br><span class="line"><span class="comment">    &lt;type&gt;jar&lt;/type&gt;</span></span><br><span class="line"><span class="comment">&lt;/dependency&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¯·æŸ¥çœ‹å¯¹åº”çš„manifestç« èŠ‚ï¼Œäº†è§£å¦‚ä½•æ·»åŠ å¯¹åº”çš„GlideModuleã€‚</p>
<h4 id="æ‰‹åŠ¨æ·»åŠ OkHttp"><a href="#æ‰‹åŠ¨æ·»åŠ OkHttp" class="headerlink" title="æ‰‹åŠ¨æ·»åŠ OkHttp"></a>æ‰‹åŠ¨æ·»åŠ OkHttp</h4><p>ä»<a href="https://github.com/bumptech/glide/releases" target="_blank" rel="noopener">releaseé¡µ</a>ä¸‹è½½<a href="https://github.com/bumptech/glide/releases/download/v3.6.1/glide-okhttp-integration-1.3.1.jar" target="_blank" rel="noopener">glide-okhttp-integration-<version>.jar </version></a>ã€‚å¹¶æ·»åŠ åˆ°ä½ appçš„ç¼–è¯‘è·¯å¾„ä¸­(compile classpath)ã€‚</p>
<p>è¯·æŸ¥çœ‹å¯¹åº”çš„manifestç« èŠ‚ï¼Œäº†è§£å¦‚ä½•æ·»åŠ å¯¹åº”çš„GlideModuleã€‚</p>
<h4 id="OkHttpçš„Manifest"><a href="#OkHttpçš„Manifest" class="headerlink" title="OkHttpçš„Manifest"></a>OkHttpçš„Manifest</h4><p>å¦‚æœä½ ä½¿ç”¨é‚£äº›ä¸æ”¯æŒmanifeståˆå¹¶çš„ç¼–è¯‘ç³»ç»Ÿï¼ˆå¦‚Mavenï¼ŒAntï¼‰ï¼Œä½ å¿…é¡»æ‰‹åŠ¨æ·»åŠ <code>GlideModule</code>çš„metadataæ ‡ç­¾åˆ°<code>AndroidManifest.xml</code>ä¸­ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">"com.bumptech.glide.integration.okhttp.OkHttpGlideModule"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:value</span>=<span class="string">"GlideModule"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="OkHttpçš„æ··æ·†è®¾ç½®"><a href="#OkHttpçš„æ··æ·†è®¾ç½®" class="headerlink" title="OkHttpçš„æ··æ·†è®¾ç½®"></a>OkHttpçš„æ··æ·†è®¾ç½®</h4><p>æ— è®ºä½¿ç”¨ä»€ä¹ˆç¼–è¯‘ç³»ç»Ÿï¼Œä¸è¦æ··æ·†<code>OkHttpGlideModule</code>ç±»ï¼Œå®ƒéœ€è¦è¢«åå°„æ¥å®ä¾‹åŒ–ã€‚æ·»åŠ ä¸‹é¢çš„ä»£ç åˆ°<code>proguard.cfg</code>æ–‡ä»¶ï¼ˆæˆ–è€…æŸ¥çœ‹â€œé€šç”¨éƒ¨åˆ†â€ï¼‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-keep <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">bumptech</span>.<span class="title">glide</span>.<span class="title">integration</span>.<span class="title">okhttp</span>.<span class="title">OkHttpGlideModule</span></span></span><br></pre></td></tr></table></figure>
<h3 id="æ›´å¤šé€‰é¡¹"><a href="#æ›´å¤šé€‰é¡¹" class="headerlink" title="æ›´å¤šé€‰é¡¹"></a>æ›´å¤šé€‰é¡¹</h3><h4 id="é€šç”¨çš„æ··æ·†é…ç½®"><a href="#é€šç”¨çš„æ··æ·†é…ç½®" class="headerlink" title="é€šç”¨çš„æ··æ·†é…ç½®"></a>é€šç”¨çš„æ··æ·†é…ç½®</h4><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„é…ç½®æ¥é¿å…æ··æ·†æ‰€æœ‰çš„<code>GlideModule</code>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-keep <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> * <span class="keyword">implements</span> <span class="title">com</span>.<span class="title">bumptech</span>.<span class="title">glide</span>.<span class="title">module</span>.<span class="title">GlideModule</span></span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹å¼æœ‰å…¶ä»–çš„å¥½å¤„ï¼Œå½“ä¿®æ”¹é›†æˆåº“æˆ–è€…è‡ªå®šä¹‰é›†æˆåº“çš„è¡Œä¸ºæ—¶ï¼Œä¸éœ€è¦ä¿®æ”¹ã€‚å½“ä½ æ·»åŠ æˆ–è€…ç§»åŠ¨å…¶ä»–moduleçš„æ—¶å€™ï¼Œä¹Ÿä¸éœ€è¦ä¿®æ”¹ä»€ä¹ˆã€‚</p>
<h4 id="è¦†ç›–é»˜è®¤çš„è¡Œä¸º"><a href="#è¦†ç›–é»˜è®¤çš„è¡Œä¸º" class="headerlink" title="è¦†ç›–é»˜è®¤çš„è¡Œä¸º"></a>è¦†ç›–é»˜è®¤çš„è¡Œä¸º</h4><p>å¦‚æœé»˜è®¤é…ç½®æ— æ³•æ»¡è¶³ä½ ï¼Œæ‰€æœ‰çš„é›†æˆåº“è¿˜æœ‰ä¸€äº›é¢å¤–çš„é€‰é¡¹ã€‚æ¯”å¦‚æ·»åŠ é‡è¯•è¡Œä¸ºï¼Œè¯·æŸ¥çœ‹é›†æˆåº“çš„<code>GlideModule</code>çš„æºç ï¼ˆä½äº<a href="https://github.com/bumptech/glide/tree/3.0/integration" target="_blank" rel="noopener">/integration/<lib>/src/main/java/<package></package></lib></a>ï¼‰äº†è§£é»˜è®¤çš„æ³¨å†Œåšäº†äº›ä»€ä¹ˆã€‚ä½ å¯ä»¥é€šè¿‡åœ¨è‡ªå®šä¹‰çš„<code>GlideModule</code>ä¸­ä¿®æ”¹å‚æ•°ä¸º<code>UrlLoader.Factory</code>ç±»æ¥æ”¹å˜é»˜è®¤è¡Œä¸ºã€‚<br>å½“ä½ è¦è¦†ç›–é»˜è®¤è¡Œä¸ºæ—¶ï¼Œè¯·ç¡®ä¿è‡ªå®šä¹‰çš„<code>GlideModule</code>è¢«æ³¨å†Œï¼Œä¸”é»˜è®¤çš„GlideModuleè¢«æ’é™¤åœ¨å¤–ã€‚æ’é™¤GlideModuleå¯èƒ½æ˜¯ä»manifestä¸­ç§»é™¤ç›¸åº”çš„çš„metadataï¼Œæˆ–è€…ä½¿ç”¨jaråŒ…ä¾èµ–ä»£æ›¿aarä¾èµ–ã€‚å…³äº<code>GlideModule</code>çš„æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹<a href="https://github.com/bumptech/glide/wiki/Configuration" target="_blank" rel="noopener">é…ç½®çš„wikié¡µ</a>\</p>
<hr>
<h2 id="åœ¨åå°çº¿ç¨‹ä¸­åŠ è½½å’Œç¼“å­˜"><a href="#åœ¨åå°çº¿ç¨‹ä¸­åŠ è½½å’Œç¼“å­˜" class="headerlink" title="åœ¨åå°çº¿ç¨‹ä¸­åŠ è½½å’Œç¼“å­˜"></a>åœ¨åå°çº¿ç¨‹ä¸­åŠ è½½å’Œç¼“å­˜</h2><p>ä¸ºäº†ä½¿åå°åŠ è½½èµ„æºå’Œä¸åª’ä½“äº¤äº’æ›´åŠ å®¹æ˜“ï¼Œé™¤äº†<code>Glide.with(fragment).load(url).into(view)</code>è¿™ä¸ªAPIå¤–ï¼ŒGlideè¿˜æä¾›äº†é¢å¤–ä¸¤ä¸ªAPIã€‚</p>
<ul>
<li><code>downloadOnly(int, int)</code></li>
<li><code>into(int, int)</code></li>
</ul>
<h3 id="downloadOnlyæ–¹æ³•"><a href="#downloadOnlyæ–¹æ³•" class="headerlink" title="downloadOnlyæ–¹æ³•"></a>downloadOnlyæ–¹æ³•</h3><p>Glideçš„<code>downloadOnly(int, int)</code>æ–¹æ³•å…è®¸ä½ æŠŠå›¾ç‰‡bytesä¸‹è½½åˆ°ç£ç›˜ç¼“å­˜ä¸­ï¼Œä»¥ä¾¿ä»¥åè·å–ä½¿ç”¨ã€‚ä½ å¯ä»¥åœ¨UIçº¿ç¨‹å¼‚æ­¥åœ°è°ƒç”¨<code>downloadOnly()</code>ï¼Œä¹Ÿå¯ä»¥åœ¨åå°çº¿ç¨‹åŒæ­¥çš„ä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œæ³¨æ„ä»–ä»¬çš„å‚æ•°æœ‰äº›ä¸åŒï¼Œå¼‚æ­¥APIçš„å‚æ•°æ˜¯<code>Target</code>ï¼ŒåŒæ­¥apiçš„å‚æ•°æ˜¯å®½å’Œé«˜çš„æ•´æ•°å€¼ã€‚<br>ä¸ºäº†åœ¨åå°çº¿ç¨‹ä¸‹è½½å›¾ç‰‡ï¼Œä½ å¿…é¡»ä½¿ç”¨åŒæ­¥æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FutureTarget&lt;File&gt; future = Glide.with(applicationContext)</span><br><span class="line">    .load(yourUrl)</span><br><span class="line">    .downloadOnly(<span class="number">500</span>, <span class="number">500</span>);</span><br><span class="line">File cacheFile = future.get();</span><br></pre></td></tr></table></figure>
<p>å½“futureè¿”å›æ—¶ï¼Œå›¾ç‰‡çš„bytesæ•°æ®å°±åœ¨ç¼“å­˜ä¸­å¯ç”¨äº†ã€‚ä¸€ç§å…¸å‹çš„æƒ…å†µæ˜¯ï¼Œä½ ä½¿ç”¨<code>downloadOnly()</code>APIåªæ˜¯ä¸ºäº†ç¡®ä¿æ•°æ®ä¸‹è½½åˆ°äº†ç£ç›˜ä¸Šã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè™½ç„¶ä½ æœ‰æƒè®¿é—®åº•å±‚çš„ç¼“å­˜æ–‡ä»¶ï¼Œä½†æ˜¯ä½ ä¸éœ€è¦ç›´æ¥å’Œå®ƒäº¤äº’ã€‚<br>è€Œæ˜¯ï¼Œå½“ä½ æƒ³è¦è·å–è¿™ä¸ªå›¾ç‰‡æ—¶ï¼Œä½ åªè¦åƒå¹³å¸¸åŠ è½½å›¾ç‰‡æ—¶é‚£æ ·è°ƒç”¨å°±è¡Œï¼Œ<strong>åªæœ‰ä¸€ç‚¹ä¸åŒ</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(yourFragment)</span><br><span class="line">    .load(yourUrl)</span><br><span class="line">    .diskCacheStrategy(DiskCacheStrategy.ALL)</span><br><span class="line">    .into(yourView);</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä¼ å…¥ <code>DiskCacheStrategy.ALL</code>æˆ–è€…<code>DiskCacheStrategy.SOURCE</code>ï¼Œç¡®ä¿Glideå¯ä»¥ä½¿ç”¨ä½ é€šè¿‡<code>downloadOnly()</code>ä¸‹è½½çš„æ•°æ®ã€‚</p>
<h3 id="intoæ–¹æ³•"><a href="#intoæ–¹æ³•" class="headerlink" title="intoæ–¹æ³•"></a>intoæ–¹æ³•</h3><p>å¦‚æœä½ æƒ³åœ¨ä¸€ä¸ª<strong>åå°çº¿ç¨‹</strong>ä¸ä¸€å¼ å·²ç»è§£ç çš„å›¾ç‰‡äº¤äº’ã€‚ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬çš„<code>into()</code>æ–¹æ³•æ¥è¿”å›ä¸€ä¸ª<code>FutureTarget</code>ã€‚ä¾‹å¦‚ï¼Œè·å–ä¸€å¼ ä¸­å¿ƒå‰ªè£åçš„500*500åƒç´ çš„å›¾ç‰‡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Bitmap myBitmap = Glide.with(applicationContext)</span><br><span class="line">    .load(yourUrl)</span><br><span class="line">    .asBitmap()</span><br><span class="line">    .centerCrop()</span><br><span class="line">    .into(<span class="number">500</span>, <span class="number">500</span>)</span><br><span class="line">    .get()</span><br></pre></td></tr></table></figure>
<p>è™½ç„¶<code>into(int, int)</code>æ–¹æ³•åœ¨åå°çº¿ç¨‹ä¸­å¾ˆæœ‰æ•ˆï¼Œä½†æ˜¯ï¼Œä½ ä¸èƒ½æŠŠå®ƒç”¨åœ¨ä¸»çº¿ç¨‹ä¸­ã€‚å³ä½¿è¿™ä¸ªåŒæ­¥æ–¹æ³•åœ¨ä½ çš„ä¸»çº¿ç¨‹ä¸­ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè°ƒç”¨get()ä¹Ÿä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚ä¼šä½¿ä½ çš„APPæ€§èƒ½å˜å·®ï¼Œååº”è¿Ÿé’ã€‚</p>
<hr>
<h2 id="Glideä¸­çš„èµ„æºå¤ç”¨"><a href="#Glideä¸­çš„èµ„æºå¤ç”¨" class="headerlink" title="Glideä¸­çš„èµ„æºå¤ç”¨"></a>Glideä¸­çš„èµ„æºå¤ç”¨</h2><h3 id="ä¸ºä»€ä¹ˆ-èµ„æºå¤ç”¨çš„ä½œç”¨"><a href="#ä¸ºä»€ä¹ˆ-èµ„æºå¤ç”¨çš„ä½œç”¨" class="headerlink" title="ä¸ºä»€ä¹ˆ - èµ„æºå¤ç”¨çš„ä½œç”¨"></a>ä¸ºä»€ä¹ˆ - èµ„æºå¤ç”¨çš„ä½œç”¨</h3><p>Glideé€šè¿‡å¤ç”¨èµ„æºé¿å…ä¸å¿…è¦çš„å†…å­˜åˆ†é…ã€‚Dalvikè™šæ‹Ÿæœºï¼ˆåœ¨Lollipopä¹‹å‰ï¼‰æœ‰ä¸¤ç§åŸºæœ¬çš„åƒåœ¾å›æ”¶æ–¹å¼ï¼Œ<code>GC_CONCURRENT</code> å’Œ<code>GC_FOR_ALLOC</code>ã€‚æ¯æ¬¡<code>GC_CONCURRENT</code>ä¼šé˜»å¡ä¸»çº¿ç¨‹5msã€‚ç”±äºæ¯æ¬¡æ“ä½œçš„æ—¶é—´å°‘äº16msï¼ˆ1å¸§çš„æ—¶é—´ï¼‰ï¼Œ<code>GC_CONCURRENT</code>å¹¶ä¸ä¼šå¼•èµ·æ‰å¸§ã€‚ç›¸åçš„æ˜¯<code>GC_FOR_ALLOC</code>ï¼Œä»–ä¼šåœæ­¢æ‰€æœ‰æ“ä½œï¼Œé˜»å¡ä¸»çº¿ç¨‹125+msï¼Œäº‹å®ä¸Šï¼ŒGC_FOR_ALLOCæ€»æ˜¯ä¼šè®©ä½ çš„appæ‰å¾ˆå¤šå¸§ã€‚å°¤å…¶æ˜¯åœ¨æ»‘åŠ¨æ—¶ï¼Œå¯¼è‡´æ˜æ˜¾çš„å¡é¡¿ã€‚<br>å¾ˆä¸å¹¸ï¼Œå³ä½¿åªæ˜¯åˆ†é…é€‚å½“çš„ç©ºé—´ï¼ˆæ¯”å¦‚16kbçš„bufferï¼‰Dalvikè¡¨ç°çš„ä¹Ÿå¾ˆç³Ÿç³•ã€‚ä¸æ–­çš„å°å†…å­˜åˆ†é…ï¼Œæˆ–è€…ä¸€æ¬¡å¤§çš„å†…å­˜åˆ†é…ï¼ˆæ¯”å¦‚è¯´bitmapï¼‰ï¼Œå°†ä¼šå¼•èµ·GC_FOR_ALLOCã€‚å› æ­¤ï¼Œä½ åˆ†é…å†…å­˜çš„è¶Šå¤šï¼Œä½ ä¼šé‡åˆ°åƒåœ¾å›æ”¶å™¨é˜»å¡åº”ç”¨çš„æƒ…å†µå°±è¶Šå¤šï¼Œåº”ç”¨æ‰å¸§å°±è¶Šä¸¥é‡ã€‚<br>é€šè¿‡é€‚åº¦å¤ç”¨å¤§å—èµ„æºï¼ŒGlideå¯ä»¥é¿å…å†…å­˜æŠ–åŠ¨ï¼Œå‡å°‘åƒåœ¾å›æ”¶å™¨é˜»å¡appçš„æ¬¡æ•°ã€‚</p>
<h3 id="æ€ä¹ˆåš-Glideæ˜¯å¦‚ä½•å¤ç”¨èµ„æº"><a href="#æ€ä¹ˆåš-Glideæ˜¯å¦‚ä½•å¤ç”¨èµ„æº" class="headerlink" title="æ€ä¹ˆåš - Glideæ˜¯å¦‚ä½•å¤ç”¨èµ„æº"></a>æ€ä¹ˆåš - Glideæ˜¯å¦‚ä½•å¤ç”¨èµ„æº</h3><p>Glideçš„èµ„æºå¤ç”¨ç­–ç•¥æ¯”è¾ƒå®½æ¾ã€‚è¿™æ„å‘³ç€ï¼Œå½“Glideè®¤ä¸ºè¯¥èµ„æºå¯ä»¥è¢«å®‰å…¨çš„å¤ç”¨æ—¶ï¼Œæ‰æœ‰å‡ ç‡å»å¤ç”¨å®ƒï¼Œå¹¶ä¸éœ€è¦å¼€å‘è€…åœ¨æ¯ä¸ªrequeståé¢å»æ‰‹åŠ¨é‡Šæ”¾èµ„æºã€‚</p>
<h4 id="æ ‡å¿—-å“ªäº›èµ„æºå¯å¤ç”¨"><a href="#æ ‡å¿—-å“ªäº›èµ„æºå¯å¤ç”¨" class="headerlink" title="æ ‡å¿—-å“ªäº›èµ„æºå¯å¤ç”¨"></a>æ ‡å¿—-å“ªäº›èµ„æºå¯å¤ç”¨</h4><p>Glideæœ‰ä¸¤ä¸ªç®€å•çš„æ ‡å¿—æ¥è¯†åˆ«å¯å¤ç”¨çš„èµ„æºã€‚</p>
<ol>
<li><p><code>Glide.clear()</code> </p>
<p> åœ¨<code>View</code>æˆ–è€…<code>Target</code>ä¸Šè°ƒç”¨<code>clear()</code>æ–¹æ³•éƒ½è¡¨ç¤ºï¼ŒGlideè¦å–æ¶ˆåŠ è½½ï¼Œå¯ä»¥å®‰å…¨åœ°æŠŠTargetå ç”¨çš„æ‰€æœ‰èµ„æºï¼ˆBitmapï¼Œbytesæ•°ç»„ç­‰ï¼‰æ”¾å…¥èµ„æºæ± ä¸­ï¼ˆpoolï¼‰ã€‚ç”¨æˆ·å¯ä»¥åœ¨ä»»ä½•æ—¶å€™å®‰å…¨åœ°æ‰‹åŠ¨è°ƒç”¨<code>clear()</code>æ–¹æ³•ï¼Œä½†æ˜¯å…¸å‹æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦è¿™æ ·åšï¼Œçœ‹ç¬¬äºŒæ¡ã€‚</p>
</li>
<li><p>Viewæˆ–è€…Targetçš„å¤ç”¨ </p>
<p> å½“ç”¨æˆ·æŠŠå›¾ç‰‡åŠ è½½åˆ°ä¸€ä¸ªå·²ç»å­˜åœ¨çš„Viewæˆ–è€…Targetä¸Šæ—¶ï¼ˆæ³¨ï¼šç¡®åˆ‡çš„è¯´æ˜¯è°ƒç”¨<code>into(xxx)</code>æ–¹æ³•ä¹‹åï¼‰ï¼ŒGlideä¼šå…ˆè°ƒç”¨<code>clear()</code>æ¸…ç©ºè¯¥View/Targetä¸Šçš„åŠ è½½è¯·æ±‚å¹¶å¤ç”¨å·²ç»æ˜¾ç¤ºè¿‡çš„èµ„æºã€‚å› æ­¤ï¼Œå¦‚æœä½ çš„ListViewæˆ–è€…RecyclerViewä¸­çš„viewä½¿ç”¨äº†å¤ç”¨æœºåˆ¶ï¼ˆæ³¨ï¼šå¦‚ViewHolderï¼‰ï¼Œé‚£ä¹ˆGlideä¼šè‡ªåŠ¨ä¸ºä»–ä»¬ç¼“å­˜èµ„æºå’Œç®¡ç†åŠ è½½è¯·æ±‚ã€‚</p>
</li>
</ol>
<h4 id="å¼•ç”¨è®¡æ•°"><a href="#å¼•ç”¨è®¡æ•°" class="headerlink" title="å¼•ç”¨è®¡æ•°"></a>å¼•ç”¨è®¡æ•°</h4><p>å¦‚æœä¸¤ä¸ªè¯·æ±‚æŒ‡å‘åŒä¸€ä¸ªèµ„æºï¼Œä¸ºäº†é¿å…é¢å¤–çš„å·¥ä½œï¼ŒGlideä¼šæŠŠå•ä¸ªèµ„æºåˆ†é…ç»™ä»–ä»¬ã€‚è¿™å°±å¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œå½“Glideå¾—çŸ¥æŸä¸ªèµ„æºä¸è¢«æŸä¸ªè°ƒç”¨è€…ä½¿ç”¨ï¼Œè¿™å¹¶ä¸è¡¨ç¤ºå®ƒä¸ä¼šè¢«å…¶ä»–è°ƒç”¨è€…ä½¿ç”¨ã€‚ä¸ºäº†é¿å…å›æ”¶è°ƒä¾æ—§è¢«ä½¿ç”¨çš„èµ„æºï¼ŒGlideä½¿ç”¨å¼•ç”¨è®¡æ•°æ¥è·Ÿè¸ªèµ„æºã€‚<br>å½“æŠŠèµ„æºæä¾›ç»™View/Targetæ—¶ï¼Œè¯¥èµ„æºçš„å¼•ç”¨è®¡æ•°åŠ 1ï¼Œå½“æ¸…ç©ºView/Targetæ—¶ï¼Œå¼•ç”¨è®¡æ•°å‡1ã€‚å½“å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼ŒGlideä¼šå›æ”¶èµ„æºï¼Œå¹¶æŠŠå®ƒçš„å†…å®¹æ”¾å›å¯ç”¨å†…å­˜æ± ä¸­ã€‚</p>
<h4 id="æ”¾å…¥ç¼“å­˜æ± "><a href="#æ”¾å…¥ç¼“å­˜æ± " class="headerlink" title="æ”¾å…¥ç¼“å­˜æ± "></a>æ”¾å…¥ç¼“å­˜æ± </h4><p>Glideçš„Resource APIæœ‰ä¸€ä¸ª<code>recycle()</code>æ–¹æ³•ï¼Œå½“Glideè®¤ä¸ºèµ„æºä¸å†è¢«å¼•ç”¨æ—¶ï¼Œä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œèµ„æºä¼šæ”¾å…¥ç¼“å­˜æ± ä¸­ã€‚</p>
<p>Glideæä¾›çš„BitmapPoolæ¥å£å¯ä»¥è®©Resourceè·å–<code>Bitmap</code>å’Œå¤ç”¨Bitmapå¯¹è±¡ã€‚Glideçš„BitmapPoolå¯ä»¥é€šè¿‡Glideå•ä¾‹è·å¾—ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Glide.get(context).getBitmapPool();</span><br></pre></td></tr></table></figure>
<p>ResourceDecoderå¯ä»¥è¿”å›Resourceçš„ä»»ä½•å®ç°ã€‚æ‰€æœ‰ï¼Œå¼€å‘è€…å¯ä»¥å®ç°ä»–ä»¬è‡ªå·±çš„Resourceå’ŒResourceDecoderæ¥è‡ªå®šä¹‰åœ°ç¼“å­˜ä¸€äº›ç‰¹æœ‰ç±»å‹çš„æ•°æ®ã€‚<br>åŒæ ·åœ°ï¼Œå¼€å‘è€…å¦‚æœæƒ³æ›´å¤šåœ°æ§åˆ¶Bitmapç¼“å­˜ï¼Œå¯ä»¥å®ç°è‡ªå·±çš„BitmapPoolï¼Œç„¶åé€šè¿‡GlideModuleé…ç½®åˆ°Glideä¸­ã€‚</p>
<h3 id="å¸¸è§çš„é”™è¯¯"><a href="#å¸¸è§çš„é”™è¯¯" class="headerlink" title="å¸¸è§çš„é”™è¯¯"></a>å¸¸è§çš„é”™è¯¯</h3><p>ä¸å¹¸çš„æ˜¯ï¼Œç¼“å­˜æ± è®¾è®¡ä½¿æˆ‘ä»¬å¾ˆéš¾åˆ¤æ–­å¼€å‘è€…æ˜¯å¦è¯¯ç”¨äº†èµ„æºæˆ–è€…bitmapã€‚ä½†æ˜¯ï¼Œåœ¨Glideä¸­æœ‰ä¸¤ä¸ªä¸»è¦çš„ç°è±¡ä¼šæš—ç¤ºä½ æŸäº›åœ°æ–¹å¯èƒ½å‡ºäº†é—®é¢˜ã€‚</p>
<h4 id="ç°è±¡"><a href="#ç°è±¡" class="headerlink" title="ç°è±¡"></a>ç°è±¡</h4><ol>
<li><p><code>Cannot draw a recycled Bitmap</code></p>
<p> Glideæœ‰ä¸ªå›ºå®šå¤§å°çš„Bitmapæ± ã€‚å½“Bitmapä¸å†è¢«å¤ç”¨ï¼ˆæ³¨ï¼šä¸æ˜¯ä½¿ç”¨ï¼ŒåŒºåˆ†ä½¿ç”¨å’Œå¤ç”¨ï¼‰ï¼Œä¼šä»æ± ä¸­ç§»èµ°ã€‚Glideä¼šè°ƒç”¨<a href="http://developer.android.com/reference/android/graphics/Bitmap.html#recycle(" target="_blank" rel="noopener"><code>recycle()</code></a>)ï¼ˆæ³¨ï¼šæŒ‡çš„æ˜¯BitmapçœŸæ­£çš„recycleï¼Œä¸æ˜¯Resourceç±»çš„recycleï¼‰ã€‚ä½ å‘Šè¯‰Glideæ”¾å¿ƒåœ°å›æ”¶æŸä¸ªBitmapï¼Œä½†æ˜¯ï¼Œä½ çš„åº”ç”¨ä¸å°å¿ƒè¿˜æŒæœ‰è¿™ä¸ªBitmapçš„å¼•ç”¨ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½ä¼šç»˜åˆ¶è¿™ä¸ªBitmapï¼Œå¯¼è‡´å´©æºƒã€‚</p>
</li>
<li><p>Viewåœ¨å¤šå¼ å›¾ç‰‡ä¹‹é—´é—ªçƒï¼Œæˆ–è€…åŒæ ·çš„å›¾ç‰‡å‡ºç°åœ¨å¤šä¸ªViewä¸­</p>
<p> å¦‚æœä¸€å¼ å›¾ç‰‡è¢«æ”¾å…¥BitmapPoolä¸­å¤šæ¬¡ã€‚æˆ–è€…è™½ç„¶ä¸€å¼ å›¾ç‰‡è¢«æ”¾å…¥äº†poolä¸­ï¼Œä½†æ˜¯æŸä¸ªViewä¾ç„¶æŒæœ‰è¿™ä¸ªå›¾çš„å¼•ç”¨ï¼Œä¸æ­¤åŒæ—¶ï¼Œå¦ä¸€å¼ å›¾ç‰‡è¢«è§£ææˆäº†Bitmapï¼ˆæ³¨ï¼šæ­¤Bitmapæ­£å¥½ç”¨äº†åˆšæ‰é‚£å¼ å›¾ç‰‡çš„æ§ä»¶æ¥å­˜æ”¾è§£æåçš„æ•°æ®ï¼‰ã€‚å¦‚æœå‘ç”Ÿè¿™ç§äº‹æƒ…ï¼ŒBitmapçš„å†…å®¹å°±ä¼šè¢«æ¢æˆäº†æ–°çš„å›¾ç‰‡å†…å®¹ã€‚æ­¤æ—¶ï¼ŒViewä¾ç„¶å°è¯•ç€ç»˜åˆ¶Bitmapï¼Œå¯¼è‡´åŸæ¥çš„Viewä¸­æ˜¾ç¤ºäº†ä¸€å¼ æ–°çš„å›¾ç‰‡ï¼</p>
</li>
</ol>
<h4 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h4><p>è¿™äº›é—®é¢˜ä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼š</p>
<ol>
<li><p>å°è¯•åŠ è½½ä¸¤ä¸ªä¸åŒçš„èµ„æºåˆ°åŒä¸€Targetä¸­</p>
<p> åœ¨Glideä¸­ï¼Œæ²¡æœ‰å®‰å…¨çš„æ–¹æ³•æ¥åŠ è½½å¤šä¸ªèµ„æºåˆ°å•ä¸€çš„Targetä¸­ã€‚å¼€å‘è€…å¯ä»¥ä½¿ç”¨<code>thumbnail()</code>æ¥åŠ è½½ä¸€ç³»åˆ—èµ„æºåˆ°åˆ°æŸä¸ªTargetä¸­ï¼Œä½†æ˜¯å¯¹äºæ¯ä¸€ä¸ªåŠ è½½çš„èµ„æºæ¥è¯´ï¼Œåªæœ‰åœ¨ä¸‹ä¸€ä¸ª<code>onResourceReady()</code>è¢«è°ƒç”¨å‰ï¼Œå®ƒçš„å¼•ç”¨æ‰æ˜¯å®‰å…¨çš„ã€‚<br>å¼€å‘è€…å¦‚æœæƒ³åŠ è½½å¤šä¸ªèµ„æºåˆ°åŒä¸€ä¸ªViewä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªç‹¬ç«‹çš„Targetã€‚ä¸ºäº†ç¡®ä¿åŠ è½½è¿‡ç¨‹ä¸ç›¸äº’å–æ¶ˆï¼Œå¼€å‘è€…è¦ä¹ˆä¸ä½¿ç”¨ViewTargetçš„å­ç±»ï¼Œè¦ä¹ˆåœ¨ç»§æ‰¿ViewTargetæ—¶ï¼Œå¤å†™<code>setRequest()</code> å’Œ <code>getRequest()</code>ï¼Œä¸è¦ä½¿ç”¨tagæ¥å­˜å‚¨Requestã€‚ï¼ˆæ³¨ï¼šéœ€è¦ä¸€ä¸ªdemo)</p>
<p> <strong>è¯‘è€…æ³¨ï¼šå¯¹äºåŒä¸€ä¸ªviewï¼Œè°ƒç”¨ä¸¤æ¬¡Glide.xxx.into(view)ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨ä¼šå…ˆæ¸…ç©ºç¬¬ä¸€ä¸ªåŠ è½½çš„å›¾ç‰‡ï¼ˆå‡ºç°ç©ºç™½ï¼‰ï¼Œå†å»ä¸‹è½½æ–°çš„å›¾ç‰‡ï¼Œå¦‚æœæƒ³è¦åœ¨ç¬¬äºŒå¼ å›¾ç‰‡ä¸‹è½½ä¸‹æ¥ä¹‹å‰ä¾æ—§æ˜¾ç¤ºä¹‹å‰çš„ï¼Œéœ€è¦ä¸€äº›æŠ€å·§</strong></p>
</li>
<li><p>åŠ è½½ä¸€ä¸ªèµ„æºæ”¾å…¥åˆ°Targetï¼Œç„¶åæ¸…ç©ºæˆ–è€…å¤ç”¨äº†Targetï¼Œä½†æ˜¯ä¾ç„¶å¼•ç”¨è¿™è¿™ä¸ªèµ„æºã€‚</p>
<p> æœ€ç®€å•çš„é¿å…è¿™ä¸ªé”™è¯¯çš„æ–¹æ³•æ˜¯åœ¨<code>onLoadCleared()</code>æ–¹æ³•ä¸­æŠŠæ‰€æœ‰å¯¹èµ„æºå¯¹è±¡çš„å¼•ç”¨ç½®nullã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒåŠ è½½ä¸€ä¸ªBitmapï¼Œç„¶åå¼•ç”¨å®ƒçš„Targetæ˜¯å®‰å…¨çš„ã€‚ä¸å®‰å…¨çš„æ˜¯ï¼Œä½ æ¸…ç©ºäº†è¿™ä¸ªTargetï¼Œå´ä¾ç„¶å¼•ç”¨ç€è¿™ä¸ªBitmapã€‚</p>
</li>
</ol>
<hr>
<h2 id="ä½¿ç”¨å¿«ç…§"><a href="#ä½¿ç”¨å¿«ç…§" class="headerlink" title="ä½¿ç”¨å¿«ç…§"></a>ä½¿ç”¨å¿«ç…§</h2><h3 id="å…³äºå¿«ç…§"><a href="#å…³äºå¿«ç…§" class="headerlink" title="å…³äºå¿«ç…§"></a>å…³äºå¿«ç…§</h3><p>å¯¹äºé‚£äº›ä¸æƒ³ç­‰å¾…Glideä¸‹ä¸ªæ­£å¼ç‰ˆæœ¬è€Œæ„¿æ„å°é²œçš„ç”¨æˆ·ï¼Œæˆ‘ä»¬åœ¨<a href="https://travis-ci.org/bumptech/glide" target="_blank" rel="noopener">Sonatype</a>ä¸Šéƒ¨ç½²äº†è¿™ä¸ªåº“çš„å¿«ç…§ã€‚<br>æ¯ä¸€æ¬¡æˆ‘ä»¬pushä»£ç å¾…GitHubçš„masteråˆ†æ”¯ï¼Œ<a href="https://oss.sonatype.org/content/repositories/snapshots/" target="_blank" rel="noopener">travis-ci</a>ä¼šæ„å»ºGlide.å¦‚æœæ„å»ºæˆåŠŸï¼Œä¼šè‡ªåŠ¨éƒ¨ç½²æœ€æ–°ç‰ˆæœ¬çš„åº“åˆ°Sonatypeä¸Šã€‚<br>å’ŒGlideä¸»åº“ä¸€æ ·ï¼Œæ¯ä¸ªIntergrationåº“ä¹Ÿæœ‰è‡ªå·±çš„å¿«ç…§ï¼Œå¦‚æœä½ ä½¿ç”¨å¿«ç…§ç‰ˆæœ¬çš„Glideåº“ï¼Œè¯·ä½¿ç”¨å¿«ç…§ç‰ˆæœ¬çš„Intergrationåº“ï¼Œåä¹‹ä¾ç„¶ã€‚</p>
<h3 id="è·å–å¿«ç…§"><a href="#è·å–å¿«ç…§" class="headerlink" title="è·å–å¿«ç…§"></a>è·å–å¿«ç…§</h3><p>Sonatypeçš„å¿«ç…§åº“å’Œå…¶ä»–çš„mavenåº“ä¸€æ ·ï¼Œæä¾›jarï¼Œmavenï¼Œgradleç­‰ç‰ˆæœ¬ã€‚</p>
<h4 id="Jar"><a href="#Jar" class="headerlink" title="Jar"></a>Jar</h4><p>JaråŒ…å¯ä»¥ç›´æ¥ä»Sonatypeä¸Šä¸‹è½½ï¼Œå†æ¬¡æ£€æŸ¥ä¸€ä¸‹æ—¥æœŸï¼Œç¡®ä¿ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬</p>
<h4 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h4><p>åœ¨ä»“åº“åˆ—è¡¨ä¸­æ·»åŠ å¿«ç…§ä»“åº“</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">repositories &#123;</span><br><span class="line">  jcenter()</span><br><span class="line">  maven &#123;</span><br><span class="line">    url 'http://oss.sonatype.org/content/repositories/snapshots'</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åä¿®æ”¹ä¾èµ–ä¸ºå¿«ç…§ç‰ˆæœ¬</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">  compile "com.github.bumptech.glide:glide:3.6.0-SNAPSHOT"</span><br><span class="line">  compile "com.github.bumptech.glide:okhttp-integration:1.3.0-SNAPSHOT"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h4><p>è¿™ç§æ–¹å¼æ²¡æœ‰æµ‹è¯•ï¼Œç›´æ¥ä»<a href="http://stackoverflow.com/questions/7715321/how-to-download-snapshot-version-from-maven-snapshot-repository" target="_blank" rel="noopener">StackOverflow</a>æ‹·è¿‡æ¥çš„ã€‚æ¬¢è¿æ”¹è¿›ä¸‹é¢çš„å†…å®¹ã€‚<br>æ·»åŠ ä¸‹é¢çš„ä»£ç åˆ°<code>~/.m2/settings.xml</code>ä¸­ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">id</span>&gt;</span>allow-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">activation</span>&gt;</span><span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span><span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">id</span>&gt;</span>snapshots-repo<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://oss.sonatype.org/content/repositories/snapshots<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">releases</span>&gt;</span><span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span><span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span><span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span><span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹ä¾èµ–ä¸ºå¿«ç…§ç‰ˆæœ¬</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.bumptech.glide<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>glide<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.6.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.bumptech.glide<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>okhttp-integration<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="å›¾å½¢å˜æ¢"><a href="#å›¾å½¢å˜æ¢" class="headerlink" title="å›¾å½¢å˜æ¢"></a>å›¾å½¢å˜æ¢</h2><h3 id="é»˜è®¤çš„å˜æ¢"><a href="#é»˜è®¤çš„å˜æ¢" class="headerlink" title="é»˜è®¤çš„å˜æ¢"></a>é»˜è®¤çš„å˜æ¢</h3><p>GlideåŒ…å«ä¸¤ç§é»˜è®¤çš„å›¾åƒå˜æ¢æ–¹å¼ï¼ŒfitCenterå’ŒcenterCropã€‚å¦‚æœå¼€å‘è€…éœ€è¦å…¶ä»–ç±»å‹çš„å˜æ¢ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è¿™ä¸ªç‹¬ç«‹çš„<a href="https://github.com/wasabeef/glide-transformations" target="_blank" rel="noopener">å˜æ¢åº“</a>ã€‚</p>
<h4 id="Fit-center"><a href="#Fit-center" class="headerlink" title="Fit center"></a>Fit center</h4><p>FitCenterä¼šæŒ‰åŸå§‹æ¯”ä¾‹ç¼©å°å›¾åƒï¼Œä½¿å›¾åƒå¯ä»¥åœ¨æ”¾åœ¨ç»™å®šçš„åŒºåŸŸå†…ã€‚FitCenterä¼šå°½å¯èƒ½å°‘åœ°ç¼©å°å›¾ç‰‡ï¼Œä½¿å®½æˆ–è€…é«˜çš„ä¸€è¾¹ç­‰äºç»™å®šçš„å€¼ã€‚å¦å¤–ä¸€è¾¹ä¼šç­‰äºæˆ–è€…å°äºç»™å®šå€¼ã€‚<br>FitCenterå’ŒAndroidä¸­çš„ScaleType.FIT_CENTERæ•ˆæœç›¸åŒã€‚</p>
<h4 id="CenterCrop"><a href="#CenterCrop" class="headerlink" title="CenterCrop"></a>CenterCrop</h4><p>CenterCropä¼šæŒ‰åŸå§‹æ¯”ä¾‹ç¼©å°å›¾åƒï¼Œä½¿å®½æˆ–è€…é«˜çš„ä¸€è¾¹ç­‰äºç»™å®šçš„å€¼ï¼Œå¦å¤–ä¸€è¾¹ä¼šç­‰äºæˆ–è€…å¤§äºç»™å®šå€¼ã€‚CenterCropä¼šè£å‰ªæ‰å¤šä½™éƒ¨åˆ†ã€‚<br>CenterCropå’ŒAndroidä¸­çš„ScaleType.CENTER_CROPæ•ˆæœç›¸åŒã€‚</p>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>fit centeræ•ˆæœä½¿ç”¨<code>.fitCenter()</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(yourFragment)</span><br><span class="line">    .load(yourUrl)</span><br><span class="line">    .fitCenter()</span><br><span class="line">    .into(yourView);</span><br></pre></td></tr></table></figure>
<p>center cropæ•ˆæœä½¿ç”¨<code>.centerCrop()</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(yourFragment)</span><br><span class="line">    .load(yourUrl)</span><br><span class="line">    . centerCrop()</span><br><span class="line">    .into(yourView);</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ åªåŠ è½½Bitmapæˆ–è€…Gifï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä¸ªå˜æ¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// For Bitmaps:</span></span><br><span class="line">Glide.with(yourFragment)</span><br><span class="line">    .load(yourUrl)</span><br><span class="line">    .asBitmap()</span><br><span class="line">    .centerCrop()</span><br><span class="line">    .into(yourView);</span><br><span class="line"></span><br><span class="line"><span class="comment">// For gifs:</span></span><br><span class="line">Glide.with(yourFragment)</span><br><span class="line">    .load(yourUrl)</span><br><span class="line">    .asGif()</span><br><span class="line">    .fitCenter()</span><br><span class="line">    .into(yourView);</span><br></pre></td></tr></table></figure>
<p>å½“åœ¨ç±»å‹é—´è½¬ç æ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿™äº›å˜æ¢ã€‚ä¾‹å¦‚ï¼Œè·å–ä¸€ä¸ªå˜å½¢åçš„jpegå›¾ç‰‡çš„bytesæ•°æ®ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Glide.with(yourFragment)</span><br><span class="line">    .load(yourUrl)</span><br><span class="line">    .asBitmap()</span><br><span class="line">    .toBytes()</span><br><span class="line">    .centerCrop()</span><br><span class="line">    .into(<span class="keyword">new</span> SimpleTarget&lt;<span class="keyword">byte</span>[]&gt;(...) &#123; ... &#125;);</span><br></pre></td></tr></table></figure>
<p>è‡ªå®šä¹‰å˜æ¢<br>é™¤äº†ä¸¤ä¸ªå†…ç½®çš„å˜æ¢ï¼Œä½ è¿˜å¯ä»¥è‡ªå®šä¹‰å˜æ¢ã€‚<br>æœ€ç®€å•çš„æ–¹å¼æ˜¯ç»§æ‰¿BitmapTransformationã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTransformation</span> <span class="keyword">extends</span> <span class="title">BitmapTransformation</span> </span>&#123; </span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyTransformation</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">super</span>(context);</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span> </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Bitmap <span class="title">transform</span><span class="params">(BitmapPool pool, Bitmap toTransform, </span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> outWidth, <span class="keyword">int</span> outHeight)</span> </span>&#123;</span><br><span class="line">       Bitmap myTransformedBitmap = ... <span class="comment">// apply some transformation here. </span></span><br><span class="line">       <span class="keyword">return</span> myTransformedBitmap; </span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Return some id that uniquely identifies your transformation. </span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"com.example.myapp.MyTransformation"</span>; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹‹åä¸€å°±å¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼ä½¿ç”¨å®ƒã€‚ä½¿ç”¨<code>.transform(...)</code>ä»£æ›¿<code>.fitCenter()</code>/<code>.centerCrop()</code>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// For the default drawable type:</span></span><br><span class="line">Glide.with(yourFragment)</span><br><span class="line">    .load(yourUrl)</span><br><span class="line">    .transform(<span class="keyword">new</span> MyTransformation(context))</span><br><span class="line">    .into(yourView);</span><br><span class="line"></span><br><span class="line"><span class="comment">// For Bitmaps:</span></span><br><span class="line">Glide.with(yourFragment)</span><br><span class="line">    .load(yourUrl)</span><br><span class="line">    .asBitmap()</span><br><span class="line">    .transform(<span class="keyword">new</span> MyTransformation(context))</span><br><span class="line">    .into(yourView);</span><br><span class="line"></span><br><span class="line"><span class="comment">// For Gifs:</span></span><br><span class="line">Glide.with(yourFragment)</span><br><span class="line">    .load(yourUrl)</span><br><span class="line">    .asGif()</span><br><span class="line">    .transform(<span class="keyword">new</span> MyTransformation(context))</span><br><span class="line">    .into(yourView);</span><br></pre></td></tr></table></figure>
<h4 id="è°ƒæ•´å¤§å°"><a href="#è°ƒæ•´å¤§å°" class="headerlink" title="è°ƒæ•´å¤§å°"></a>è°ƒæ•´å¤§å°</h4><p>ä½ å¯èƒ½æ³¨æ„åˆ°ä¸Šé¢çš„ä¾‹å­æ²¡æœ‰ä¼ å…¥å…·ä½“çš„å°ºå¯¸ï¼Œé‚£ä¹ˆï¼ŒTransformationä¸­çš„å°ºå¯¸æ˜¯å¦‚ä½•è·å¾—çš„å‘¢ï¼Ÿ<br>Transformationä¸­çš„å°ºå¯¸å°±æ˜¯Viewæˆ–è€…Targetçš„å¤§å°ã€‚Glideä¼šæ ¹æ®å¸ƒå±€æ–‡ä»¶ä¸­çš„weightï¼Œmatch_parentæˆ–è€…å…·ä½“å€¼ç®—å‡ºViewçš„å¤§å°ã€‚ï¼Œå½“ä½ æ‹¥æœ‰View/Targetçš„å…·ä½“å¤§å°ï¼Œåˆæ‹¥æœ‰åŸå§‹å›¾ç‰‡çš„å¤§å°æ—¶ï¼Œå°±å¯ä»¥é€šè¿‡å›¾åƒå˜æ¢ç”Ÿæˆä¸€ä¸ªæ­£ç¡®å¤§å°çš„å›¾ç‰‡ã€‚<br>å¦‚æœä½ æƒ³æŒ‡å®šView/Targetçš„è‡ªå®šä¹‰å¤§å°ï¼Œå¯ä»¥ä½¿ç”¨<code>.override(int, int)</code>æ–¹æ³•ï¼Œå¦‚æœä½ æƒ³åŠ è½½ä¸€ä¸ªå›¾ç‰‡æœ‰å…¶ä»–ç”¨é€”ï¼Œè€Œä¸æ˜¯æ˜¾ç¤ºåœ¨Viewä¸­ï¼Œè¯·æŸ¥çœ‹ã€è‡ªå®šä¹‰Targetã€ç« èŠ‚ã€‚</p>
<h4 id="Bitmap-å¤ç”¨"><a href="#Bitmap-å¤ç”¨" class="headerlink" title="Bitmap å¤ç”¨"></a>Bitmap å¤ç”¨</h4><p>ä¸ºäº†å‡å°‘åƒåœ¾å›æ”¶ï¼Œä½ å¯ä»¥è¯´ä½¿ç”¨<code>BitmapPool</code>æ¥å£æ¥é‡Šæ”¾ä¸æƒ³è¦çš„Bitmapæˆ–è€…å¤ç”¨å­˜åœ¨çš„Bitmapã€‚ä¸€ä¸ªåœ¨Transformationä¸­å¤ç”¨Bitmapå…¸å‹çš„ä¾‹å­ï¼šä»poolä¸­è·å–Bitmapï¼Œä½¿ç”¨è¯¥Bitmapåˆ›å»ºä¸€ä¸ª<code>Canvas</code>ï¼Œç„¶åä½¿ç”¨Matrix/Paint/Shaderæ¥å˜æ¢å›¾åƒå¹¶ç»˜åˆ¶åˆ°Canvasä¸Šã€‚ä¸ºäº†æ­£ç¡®æœ‰æ•ˆåœ°åœ¨Transformationä¸­å¤ç”¨Bitmapä¸­ï¼Œéµå®ˆä¸‹é¢çš„è§„åˆ™ï¼š</p>
<ol>
<li>åœ¨<code>transform()</code>ä¸è¦å›æ”¶èµ„æºæˆ–è€…æŠŠBitmapæ”¾å…¥Bitmapæ± ä¸­ï¼Œè¿™äº›æ­¥éª¤ä¼šè‡ªåŠ¨å®Œæˆã€‚</li>
<li>å¦‚æœä½ ä»Bitmapæ± ä¸­è·å–äº†å¤šä¸ªBitmapï¼Œæˆ–è€…æ²¡æœ‰ä½¿ç”¨ä»poolä¸­è·å–åˆ°çš„Bitmapï¼Œç¡®ä¿æŠŠå¤šä½™çš„Bitmapæ”¾å›poolä¸­ã€‚</li>
<li>å¦‚æœä½ çš„Trasformationå¹¶æ²¡æœ‰æ›¿æ¢è°ƒåŸå§‹å›¾ç‰‡ï¼ˆæ¯”å¦‚ï¼Œå›¾ç‰‡å·²ç»æ»¡è¶³ä½ è¦æ±‚çš„å¤§å°ï¼Œç›´æ¥è¿”å›äº†ï¼‰ï¼Œè¯·åœ¨<code>transform()</code>æ–¹æ³•ä¸­è¿”å›åŸå§‹çš„èµ„æºæˆ–è€…Bitmapã€‚</li>
</ol>
<p>ä¸€ä¸ªå…¸å‹çš„ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> Bitmap <span class="title">transform</span><span class="params">(BitmapPool bitmapPool, Bitmap original, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span> </span>&#123;</span><br><span class="line">    Bitmap result = bitmapPool.get(width, height, Bitmap.Config.ARGB_8888);</span><br><span class="line">    <span class="comment">// If no matching Bitmap is in the pool, get will return null, so we should allocate. </span></span><br><span class="line">    <span class="keyword">if</span> (result == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// Use ARGB_8888 since we're going to add alpha to the image. </span></span><br><span class="line">        result = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">// Create a Canvas backed by the result Bitmap. </span></span><br><span class="line">    Canvas canvas = <span class="keyword">new</span> Canvas(result);</span><br><span class="line">    Paint paint = <span class="keyword">new</span> Paint();</span><br><span class="line">    paint.setAlpha(<span class="number">128</span>);</span><br><span class="line">    <span class="comment">// Draw the original Bitmap onto the result Bitmap with a transformation. </span></span><br><span class="line">    canvas.drawBitmap(original, <span class="number">0</span>, <span class="number">0</span>, paint);</span><br><span class="line">    <span class="comment">// Since we've replaced our original Bitmap, we return our new Bitmap here. Glide will </span></span><br><span class="line">    <span class="comment">// will take care of returning our original Bitmap to the BitmapPool for us.  </span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

    </div>

    
    
    
        

  <div class="followme">
    <p>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¶å®ƒå‘å¸ƒæ¸ é“</p>

    <div class="social-list">

            <div class="social-item">
              <a target="_blank" class="social-link" href="https://t.me/mltalk">
                <span class="icon">
                  <i class="fa fa-telegram"></i>
                </span>

                <span class="label">æœºå™¨å­¦ä¹ ç¢ç¢å¿µ</span>
              </a>
            </div>
    </div>
  </div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Android/" rel="tag"># Android</a>
              <a href="/tags/ä¸»æ¡†æ¶/" rel="tag"># ä¸»æ¡†æ¶</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2016/01/17/æŠ¢çº¢åŒ…æ’ä»¶åˆ†æä»¥åŠåº”ç”¨/" rel="prev" title="æŠ¢çº¢åŒ…æ’ä»¶åˆ†æä»¥åŠåº”ç”¨">
      <i class="fa fa-chevron-left"></i> æŠ¢çº¢åŒ…æ’ä»¶åˆ†æä»¥åŠåº”ç”¨
    </a></div>
      <div class="post-nav-item">
    <a href="/2016/01/24/test/" rel="next" title="è¯„è®ºæµ‹è¯•">
      è¯„è®ºæµ‹è¯• <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#åº"><span class="nav-number">1.</span> <span class="nav-text">åº</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#åè¯è§£é‡Š"><span class="nav-number">1.1.</span> <span class="nav-text">åè¯è§£é‡Š</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç›®å½•"><span class="nav-number">2.</span> <span class="nav-text">ç›®å½•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä¸»ç›®å½•"><span class="nav-number">3.</span> <span class="nav-text">ä¸»ç›®å½•</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#æŠ¥å‘Šé—®é¢˜"><span class="nav-number">3.1.</span> <span class="nav-text">æŠ¥å‘Šé—®é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-0ç‰ˆæœ¬çš„æ–°ç‰¹æ€§"><span class="nav-number">3.2.</span> <span class="nav-text">3.0ç‰ˆæœ¬çš„æ–°ç‰¹æ€§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä»2-0è¿ç§»åˆ°3-0"><span class="nav-number">3.3.</span> <span class="nav-text">ä»2.0è¿ç§»åˆ°3.0</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç‰¹æ€§"><span class="nav-number">3.4.</span> <span class="nav-text">ç‰¹æ€§</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç¼“å­˜æœºåˆ¶ä¸ç¼“å­˜å¤±æ•ˆ"><span class="nav-number">4.</span> <span class="nav-text">ç¼“å­˜æœºåˆ¶ä¸ç¼“å­˜å¤±æ•ˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ç¼“å­˜çš„key"><span class="nav-number">4.1.</span> <span class="nav-text">ç¼“å­˜çš„key</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç¼“å­˜å¤±æ•ˆ"><span class="nav-number">4.2.</span> <span class="nav-text">ç¼“å­˜å¤±æ•ˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è‡ªå®šä¹‰ç¼“å­˜å¤±æ•ˆ"><span class="nav-number">4.3.</span> <span class="nav-text">è‡ªå®šä¹‰ç¼“å­˜å¤±æ•ˆ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é…ç½®"><span class="nav-number">5.</span> <span class="nav-text">é…ç½®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#æ‡’åŠ è½½é…ç½®"><span class="nav-number">5.1.</span> <span class="nav-text">æ‡’åŠ è½½é…ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åˆ›å»ºä¸€ä¸ªGlideModule"><span class="nav-number">5.2.</span> <span class="nav-text">åˆ›å»ºä¸€ä¸ªGlideModule</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Libraryå·¥ç¨‹"><span class="nav-number">5.3.</span> <span class="nav-text">Libraryå·¥ç¨‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GlideModuleå†²çª"><span class="nav-number">5.4.</span> <span class="nav-text">GlideModuleå†²çª</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å…¨å±€é…ç½®"><span class="nav-number">5.5.</span> <span class="nav-text">å…¨å±€é…ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç£ç›˜ç¼“å­˜"><span class="nav-number">5.6.</span> <span class="nav-text">ç£ç›˜ç¼“å­˜</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#å¤§å°"><span class="nav-number">5.6.1.</span> <span class="nav-text">å¤§å°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä½ç½®"><span class="nav-number">5.6.2.</span> <span class="nav-text">ä½ç½®</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å†…å­˜ç¼“å­˜å’Œç¼“å­˜æ± "><span class="nav-number">5.7.</span> <span class="nav-text">å†…å­˜ç¼“å­˜å’Œç¼“å­˜æ± </span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#å¤§å°-1"><span class="nav-number">5.7.1.</span> <span class="nav-text">å¤§å°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å†…å­˜ç¼“å­˜"><span class="nav-number">5.7.2.</span> <span class="nav-text">å†…å­˜ç¼“å­˜</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Bitmapæ± "><span class="nav-number">5.7.3.</span> <span class="nav-text">Bitmapæ± </span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bitmapæ ¼å¼"><span class="nav-number">5.8.</span> <span class="nav-text">Bitmapæ ¼å¼</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è‡ªå®šä¹‰ç›®æ ‡ï¼ˆTargetsï¼‰"><span class="nav-number">6.</span> <span class="nav-text">è‡ªå®šä¹‰ç›®æ ‡ï¼ˆTargetsï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SimpleTarget"><span class="nav-number">6.1.</span> <span class="nav-text">SimpleTarget</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸€äº›è­¦å‘Š"><span class="nav-number">6.1.1.</span> <span class="nav-text">ä¸€äº›è­¦å‘Š</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ViewTarget"><span class="nav-number">6.2.</span> <span class="nav-text">ViewTarget</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è¦†ç›–é»˜è®¤è¡Œä¸º"><span class="nav-number">6.3.</span> <span class="nav-text">è¦†ç›–é»˜è®¤è¡Œä¸º</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è°ƒè¯•å’Œé”™è¯¯å¤„ç†"><span class="nav-number">7.</span> <span class="nav-text">è°ƒè¯•å’Œé”™è¯¯å¤„ç†</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#è°ƒè¯•"><span class="nav-number">7.1.</span> <span class="nav-text">è°ƒè¯•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è°ƒè¯•å·¥ä½œæµ"><span class="nav-number">7.2.</span> <span class="nav-text">è°ƒè¯•å·¥ä½œæµ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç›‘å¬è¯·æ±‚-RequestListener"><span class="nav-number">7.3.</span> <span class="nav-text">ç›‘å¬è¯·æ±‚-RequestListener</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ›´å¤šæ—¥å¿—"><span class="nav-number">7.4.</span> <span class="nav-text">æ›´å¤šæ—¥å¿—</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä½¿ç”¨Glideä¸‹è½½è‡ªå®šä¹‰å¤§å°çš„å›¾ç‰‡"><span class="nav-number">8.</span> <span class="nav-text">ä½¿ç”¨Glideä¸‹è½½è‡ªå®šä¹‰å¤§å°çš„å›¾ç‰‡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é›†æˆï¼ˆIntegrationï¼‰åº“-Glideä¸å…¶ä»–åº“æ•´åˆ"><span class="nav-number">9.</span> <span class="nav-text">é›†æˆï¼ˆIntegrationï¼‰åº“-Glideä¸å…¶ä»–åº“æ•´åˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ä»‹ç»"><span class="nav-number">9.1.</span> <span class="nav-text">ä»‹ç»</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä»€ä¹ˆæ˜¯é›†æˆåº“ï¼ˆIntegration-Libraryï¼‰"><span class="nav-number">9.1.1.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯é›†æˆåº“ï¼ˆIntegration Libraryï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸ºä»€ä¹ˆæ²¡æœ‰XXXåº“çš„å®ç°"><span class="nav-number">9.1.2.</span> <span class="nav-text">ä¸ºä»€ä¹ˆæ²¡æœ‰XXXåº“çš„å®ç°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æˆ‘å¦‚ä½•ä¾èµ–ä¸€ä¸ªé›†æˆåº“å‘¢ï¼Ÿ"><span class="nav-number">9.1.3.</span> <span class="nav-text">æˆ‘å¦‚ä½•ä¾èµ–ä¸€ä¸ªé›†æˆåº“å‘¢ï¼Ÿ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æˆ‘åº”å½“é€‰æ‹©å“ªä¸ªç‰ˆæœ¬ï¼Ÿ"><span class="nav-number">9.1.4.</span> <span class="nav-text">æˆ‘åº”å½“é€‰æ‹©å“ªä¸ªç‰ˆæœ¬ï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Volley"><span class="nav-number">9.2.</span> <span class="nav-text">Volley</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Gradleä¸­ä½¿ç”¨Volley"><span class="nav-number">9.2.1.</span> <span class="nav-text">Gradleä¸­ä½¿ç”¨Volley</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Mavenä¸­æ˜¯Volley"><span class="nav-number">9.2.2.</span> <span class="nav-text">Mavenä¸­æ˜¯Volley</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ‰‹åŠ¨æ·»åŠ Volley"><span class="nav-number">9.2.3.</span> <span class="nav-text">æ‰‹åŠ¨æ·»åŠ Volley</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Volleyçš„Manifest"><span class="nav-number">9.2.4.</span> <span class="nav-text">Volleyçš„Manifest</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Volleyçš„æ··æ·†è®¾ç½®"><span class="nav-number">9.2.5.</span> <span class="nav-text">Volleyçš„æ··æ·†è®¾ç½®</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#OkHttp"><span class="nav-number">9.3.</span> <span class="nav-text">OkHttp</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Gradleä¸­ä½¿ç”¨OkHttp"><span class="nav-number">9.3.1.</span> <span class="nav-text">Gradleä¸­ä½¿ç”¨OkHttp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Mavenä¸­æ˜¯OkHttp"><span class="nav-number">9.3.2.</span> <span class="nav-text">Mavenä¸­æ˜¯OkHttp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ‰‹åŠ¨æ·»åŠ OkHttp"><span class="nav-number">9.3.3.</span> <span class="nav-text">æ‰‹åŠ¨æ·»åŠ OkHttp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#OkHttpçš„Manifest"><span class="nav-number">9.3.4.</span> <span class="nav-text">OkHttpçš„Manifest</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#OkHttpçš„æ··æ·†è®¾ç½®"><span class="nav-number">9.3.5.</span> <span class="nav-text">OkHttpçš„æ··æ·†è®¾ç½®</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ›´å¤šé€‰é¡¹"><span class="nav-number">9.4.</span> <span class="nav-text">æ›´å¤šé€‰é¡¹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#é€šç”¨çš„æ··æ·†é…ç½®"><span class="nav-number">9.4.1.</span> <span class="nav-text">é€šç”¨çš„æ··æ·†é…ç½®</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#è¦†ç›–é»˜è®¤çš„è¡Œä¸º"><span class="nav-number">9.4.2.</span> <span class="nav-text">è¦†ç›–é»˜è®¤çš„è¡Œä¸º</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åœ¨åå°çº¿ç¨‹ä¸­åŠ è½½å’Œç¼“å­˜"><span class="nav-number">10.</span> <span class="nav-text">åœ¨åå°çº¿ç¨‹ä¸­åŠ è½½å’Œç¼“å­˜</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#downloadOnlyæ–¹æ³•"><span class="nav-number">10.1.</span> <span class="nav-text">downloadOnlyæ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#intoæ–¹æ³•"><span class="nav-number">10.2.</span> <span class="nav-text">intoæ–¹æ³•</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Glideä¸­çš„èµ„æºå¤ç”¨"><span class="nav-number">11.</span> <span class="nav-text">Glideä¸­çš„èµ„æºå¤ç”¨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¸ºä»€ä¹ˆ-èµ„æºå¤ç”¨çš„ä½œç”¨"><span class="nav-number">11.1.</span> <span class="nav-text">ä¸ºä»€ä¹ˆ - èµ„æºå¤ç”¨çš„ä½œç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ€ä¹ˆåš-Glideæ˜¯å¦‚ä½•å¤ç”¨èµ„æº"><span class="nav-number">11.2.</span> <span class="nav-text">æ€ä¹ˆåš - Glideæ˜¯å¦‚ä½•å¤ç”¨èµ„æº</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#æ ‡å¿—-å“ªäº›èµ„æºå¯å¤ç”¨"><span class="nav-number">11.2.1.</span> <span class="nav-text">æ ‡å¿—-å“ªäº›èµ„æºå¯å¤ç”¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å¼•ç”¨è®¡æ•°"><span class="nav-number">11.2.2.</span> <span class="nav-text">å¼•ç”¨è®¡æ•°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ”¾å…¥ç¼“å­˜æ± "><span class="nav-number">11.2.3.</span> <span class="nav-text">æ”¾å…¥ç¼“å­˜æ± </span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¸¸è§çš„é”™è¯¯"><span class="nav-number">11.3.</span> <span class="nav-text">å¸¸è§çš„é”™è¯¯</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ç°è±¡"><span class="nav-number">11.3.1.</span> <span class="nav-text">ç°è±¡</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#åŸå› "><span class="nav-number">11.3.2.</span> <span class="nav-text">åŸå› </span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä½¿ç”¨å¿«ç…§"><span class="nav-number">12.</span> <span class="nav-text">ä½¿ç”¨å¿«ç…§</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å…³äºå¿«ç…§"><span class="nav-number">12.1.</span> <span class="nav-text">å…³äºå¿«ç…§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è·å–å¿«ç…§"><span class="nav-number">12.2.</span> <span class="nav-text">è·å–å¿«ç…§</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Jar"><span class="nav-number">12.2.1.</span> <span class="nav-text">Jar</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Gradle"><span class="nav-number">12.2.2.</span> <span class="nav-text">Gradle</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Maven"><span class="nav-number">12.2.3.</span> <span class="nav-text">Maven</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å›¾å½¢å˜æ¢"><span class="nav-number">13.</span> <span class="nav-text">å›¾å½¢å˜æ¢</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#é»˜è®¤çš„å˜æ¢"><span class="nav-number">13.1.</span> <span class="nav-text">é»˜è®¤çš„å˜æ¢</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Fit-center"><span class="nav-number">13.1.1.</span> <span class="nav-text">Fit center</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CenterCrop"><span class="nav-number">13.1.2.</span> <span class="nav-text">CenterCrop</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä½¿ç”¨"><span class="nav-number">13.2.</span> <span class="nav-text">ä½¿ç”¨</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#è°ƒæ•´å¤§å°"><span class="nav-number">13.2.1.</span> <span class="nav-text">è°ƒæ•´å¤§å°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Bitmap-å¤ç”¨"><span class="nav-number">13.2.2.</span> <span class="nav-text">Bitmap å¤ç”¨</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">limuzhi</p>
  <div class="site-description" itemprop="description">something about tech, android etc...</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">50</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/muzhi1991" title="GitHub â†’ https://github.com/muzhi1991" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:muzhi1991@gmail.com" title="E-Mail â†’ mailto:muzhi1991@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/muzhi1991" title="Twitter â†’ https://twitter.com/muzhi1991" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.chenyupeng.com/" title="https://www.chenyupeng.com/" rel="noopener" target="_blank">é™ˆç‰é¹çš„ä¸ªäººç©ºé—´</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://macshuo.com/" title="http://macshuo.com/" rel="noopener" target="_blank">MacTalk</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">limuzhi</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.9.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://mist.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.7.1
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'G5HLDFmPsllxIjax4F2JTLnl-gzGzoHsz',
      appKey     : 'A5PTgbvpJwjPlcBJ3Brl8rDs',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
